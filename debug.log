13204 07.06.2021 17:13:46 [KMG] debug: START TRANSACTION
13204 07.06.2021 17:13:46 [KMG] debug: SELECT * FROM current_schema()
13204 07.06.2021 17:13:46 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
13204 07.06.2021 17:13:47 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:13:47 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:13:47 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:13:47 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:13:47 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
13204 07.06.2021 17:13:47 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
13204 07.06.2021 17:13:47 [KMG] debug: creating a new table: car.grade
13204 07.06.2021 17:13:47 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:13:47 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
13204 07.06.2021 17:13:47 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:13:47 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
13204 07.06.2021 17:13:47 [KMG] debug: ROLLBACK
13204 07.06.2021 17:13:50 [KMG] debug: START TRANSACTION
13204 07.06.2021 17:13:50 [KMG] debug: SELECT * FROM current_schema()
13204 07.06.2021 17:13:50 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
13204 07.06.2021 17:13:50 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:13:50 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:13:50 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:13:50 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:13:50 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
13204 07.06.2021 17:13:50 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
13204 07.06.2021 17:13:50 [KMG] debug: creating a new table: car.grade
13204 07.06.2021 17:13:50 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:13:50 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
13204 07.06.2021 17:13:50 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:13:50 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
13204 07.06.2021 17:13:50 [KMG] debug: ROLLBACK
13204 07.06.2021 17:13:53 [KMG] debug: START TRANSACTION
13204 07.06.2021 17:13:53 [KMG] debug: SELECT * FROM current_schema()
13204 07.06.2021 17:13:53 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
13204 07.06.2021 17:13:53 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:13:53 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:13:53 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:13:53 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:13:54 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
13204 07.06.2021 17:13:54 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
13204 07.06.2021 17:13:54 [KMG] debug: creating a new table: car.grade
13204 07.06.2021 17:13:54 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:13:54 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
13204 07.06.2021 17:13:54 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:13:54 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
13204 07.06.2021 17:13:54 [KMG] debug: ROLLBACK
13204 07.06.2021 17:13:57 [KMG] debug: START TRANSACTION
13204 07.06.2021 17:13:57 [KMG] debug: SELECT * FROM current_schema()
13204 07.06.2021 17:13:57 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
13204 07.06.2021 17:13:57 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:13:57 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:13:57 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:13:57 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:13:57 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
13204 07.06.2021 17:13:57 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
13204 07.06.2021 17:13:57 [KMG] debug: creating a new table: car.grade
13204 07.06.2021 17:13:57 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:13:57 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
13204 07.06.2021 17:13:57 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:13:57 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
13204 07.06.2021 17:13:57 [KMG] debug: ROLLBACK
13204 07.06.2021 17:14:00 [KMG] debug: START TRANSACTION
13204 07.06.2021 17:14:00 [KMG] debug: SELECT * FROM current_schema()
13204 07.06.2021 17:14:00 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
13204 07.06.2021 17:14:00 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:14:00 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:14:00 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:14:00 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:14:00 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
13204 07.06.2021 17:14:00 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
13204 07.06.2021 17:14:00 [KMG] debug: creating a new table: car.grade
13204 07.06.2021 17:14:00 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:14:00 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
13204 07.06.2021 17:14:00 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:14:00 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
13204 07.06.2021 17:14:00 [KMG] debug: ROLLBACK
13204 07.06.2021 17:14:03 [KMG] debug: START TRANSACTION
13204 07.06.2021 17:14:03 [KMG] debug: SELECT * FROM current_schema()
13204 07.06.2021 17:14:03 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
13204 07.06.2021 17:14:04 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:14:04 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:14:04 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:14:04 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:14:04 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
13204 07.06.2021 17:14:04 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
13204 07.06.2021 17:14:04 [KMG] debug: creating a new table: car.grade
13204 07.06.2021 17:14:04 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:14:04 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
13204 07.06.2021 17:14:04 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:14:04 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
13204 07.06.2021 17:14:04 [KMG] debug: ROLLBACK
13204 07.06.2021 17:14:07 [KMG] debug: START TRANSACTION
13204 07.06.2021 17:14:07 [KMG] debug: SELECT * FROM current_schema()
13204 07.06.2021 17:14:07 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
13204 07.06.2021 17:14:07 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:14:07 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:14:07 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:14:07 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:14:07 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
13204 07.06.2021 17:14:07 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
13204 07.06.2021 17:14:07 [KMG] debug: creating a new table: car.grade
13204 07.06.2021 17:14:07 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:14:07 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
13204 07.06.2021 17:14:07 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:14:07 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
13204 07.06.2021 17:14:07 [KMG] debug: ROLLBACK
13204 07.06.2021 17:14:10 [KMG] debug: START TRANSACTION
13204 07.06.2021 17:14:10 [KMG] debug: SELECT * FROM current_schema()
13204 07.06.2021 17:14:10 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
13204 07.06.2021 17:14:10 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:14:10 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:14:10 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:14:10 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:14:10 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
13204 07.06.2021 17:14:10 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
13204 07.06.2021 17:14:10 [KMG] debug: creating a new table: car.grade
13204 07.06.2021 17:14:10 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:14:10 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
13204 07.06.2021 17:14:10 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:14:10 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
13204 07.06.2021 17:14:10 [KMG] debug: ROLLBACK
13204 07.06.2021 17:14:13 [KMG] debug: START TRANSACTION
13204 07.06.2021 17:14:13 [KMG] debug: SELECT * FROM current_schema()
13204 07.06.2021 17:14:13 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
13204 07.06.2021 17:14:14 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:14:14 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'car' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13204 07.06.2021 17:14:14 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:14:14 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13204 07.06.2021 17:14:14 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
13204 07.06.2021 17:14:14 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
13204 07.06.2021 17:14:14 [KMG] debug: creating a new table: car.grade
13204 07.06.2021 17:14:14 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:14:14 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
13204 07.06.2021 17:14:14 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
13204 07.06.2021 17:14:14 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
13204 07.06.2021 17:14:14 [KMG] debug: ROLLBACK
10452 07.06.2021 17:14:45 [KMG] debug: START TRANSACTION
10452 07.06.2021 17:14:45 [KMG] debug: SELECT * FROM current_schema()
10452 07.06.2021 17:14:45 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
10452 07.06.2021 17:14:45 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:14:45 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:14:45 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:14:45 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:14:45 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
10452 07.06.2021 17:14:45 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
10452 07.06.2021 17:14:45 [KMG] debug: creating a new table: car.grade
10452 07.06.2021 17:14:45 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:14:45 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
10452 07.06.2021 17:14:45 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:14:45 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
10452 07.06.2021 17:14:45 [KMG] debug: ROLLBACK
10452 07.06.2021 17:14:49 [KMG] debug: START TRANSACTION
10452 07.06.2021 17:14:49 [KMG] debug: SELECT * FROM current_schema()
10452 07.06.2021 17:14:49 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
10452 07.06.2021 17:14:49 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:14:49 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:14:49 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:14:49 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:14:49 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
10452 07.06.2021 17:14:49 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
10452 07.06.2021 17:14:49 [KMG] debug: creating a new table: car.grade
10452 07.06.2021 17:14:49 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:14:49 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
10452 07.06.2021 17:14:49 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:14:49 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
10452 07.06.2021 17:14:49 [KMG] debug: ROLLBACK
10452 07.06.2021 17:14:53 [KMG] debug: START TRANSACTION
10452 07.06.2021 17:14:53 [KMG] debug: SELECT * FROM current_schema()
10452 07.06.2021 17:14:53 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
10452 07.06.2021 17:14:53 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:14:53 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:14:53 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:14:53 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:14:53 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
10452 07.06.2021 17:14:53 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
10452 07.06.2021 17:14:53 [KMG] debug: creating a new table: car.grade
10452 07.06.2021 17:14:53 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:14:53 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
10452 07.06.2021 17:14:53 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:14:53 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
10452 07.06.2021 17:14:53 [KMG] debug: ROLLBACK
10452 07.06.2021 17:14:56 [KMG] debug: START TRANSACTION
10452 07.06.2021 17:14:56 [KMG] debug: SELECT * FROM current_schema()
10452 07.06.2021 17:14:56 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
10452 07.06.2021 17:14:56 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:14:56 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:14:56 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:14:56 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:14:56 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
10452 07.06.2021 17:14:56 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
10452 07.06.2021 17:14:56 [KMG] debug: creating a new table: car.grade
10452 07.06.2021 17:14:56 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:14:56 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
10452 07.06.2021 17:14:56 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:14:56 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
10452 07.06.2021 17:14:56 [KMG] debug: ROLLBACK
10452 07.06.2021 17:14:59 [KMG] debug: START TRANSACTION
10452 07.06.2021 17:14:59 [KMG] debug: SELECT * FROM current_schema()
10452 07.06.2021 17:14:59 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
10452 07.06.2021 17:15:00 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:15:00 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:15:00 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:15:00 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:15:00 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
10452 07.06.2021 17:15:00 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
10452 07.06.2021 17:15:00 [KMG] debug: creating a new table: car.grade
10452 07.06.2021 17:15:00 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:15:00 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
10452 07.06.2021 17:15:00 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:15:00 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
10452 07.06.2021 17:15:00 [KMG] debug: ROLLBACK
10452 07.06.2021 17:15:03 [KMG] debug: START TRANSACTION
10452 07.06.2021 17:15:03 [KMG] debug: SELECT * FROM current_schema()
10452 07.06.2021 17:15:03 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
10452 07.06.2021 17:15:03 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:15:03 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:15:03 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:15:03 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:15:03 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
10452 07.06.2021 17:15:03 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
10452 07.06.2021 17:15:03 [KMG] debug: creating a new table: car.grade
10452 07.06.2021 17:15:03 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:15:03 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
10452 07.06.2021 17:15:03 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:15:03 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
10452 07.06.2021 17:15:03 [KMG] debug: ROLLBACK
10452 07.06.2021 17:15:07 [KMG] debug: START TRANSACTION
10452 07.06.2021 17:15:07 [KMG] debug: SELECT * FROM current_schema()
10452 07.06.2021 17:15:07 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
10452 07.06.2021 17:15:07 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:15:07 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:15:07 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:15:07 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:15:07 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
10452 07.06.2021 17:15:07 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
10452 07.06.2021 17:15:07 [KMG] debug: creating a new table: car.grade
10452 07.06.2021 17:15:07 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:15:07 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
10452 07.06.2021 17:15:07 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:15:07 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
10452 07.06.2021 17:15:07 [KMG] debug: ROLLBACK
10452 07.06.2021 17:15:10 [KMG] debug: START TRANSACTION
10452 07.06.2021 17:15:10 [KMG] debug: SELECT * FROM current_schema()
10452 07.06.2021 17:15:10 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
10452 07.06.2021 17:15:10 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:15:10 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:15:10 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:15:10 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:15:10 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
10452 07.06.2021 17:15:10 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
10452 07.06.2021 17:15:10 [KMG] debug: creating a new table: car.grade
10452 07.06.2021 17:15:10 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:15:10 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
10452 07.06.2021 17:15:10 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:15:10 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
10452 07.06.2021 17:15:10 [KMG] debug: ROLLBACK
10452 07.06.2021 17:15:13 [KMG] debug: START TRANSACTION
10452 07.06.2021 17:15:13 [KMG] debug: SELECT * FROM current_schema()
10452 07.06.2021 17:15:13 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
10452 07.06.2021 17:15:13 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:15:13 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10452 07.06.2021 17:15:13 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:15:13 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10452 07.06.2021 17:15:13 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
10452 07.06.2021 17:15:13 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
10452 07.06.2021 17:15:13 [KMG] debug: creating a new table: car.grade
10452 07.06.2021 17:15:13 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:15:13 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
10452 07.06.2021 17:15:13 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
10452 07.06.2021 17:15:13 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
10452 07.06.2021 17:15:13 [KMG] debug: ROLLBACK
964 07.06.2021 17:17:44 [KMG] debug: START TRANSACTION
964 07.06.2021 17:17:44 [KMG] debug: SELECT * FROM current_schema()
964 07.06.2021 17:17:44 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
964 07.06.2021 17:17:44 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
964 07.06.2021 17:17:44 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
964 07.06.2021 17:17:44 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
964 07.06.2021 17:17:44 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
964 07.06.2021 17:17:44 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
964 07.06.2021 17:17:44 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
964 07.06.2021 17:17:44 [KMG] debug: creating a new table: car.grade
964 07.06.2021 17:17:44 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
964 07.06.2021 17:17:44 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
964 07.06.2021 17:17:44 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
964 07.06.2021 17:17:44 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
964 07.06.2021 17:17:44 [KMG] debug: ROLLBACK
964 07.06.2021 17:17:47 [KMG] debug: START TRANSACTION
964 07.06.2021 17:17:47 [KMG] debug: SELECT * FROM current_schema()
964 07.06.2021 17:17:47 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
964 07.06.2021 17:17:47 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
964 07.06.2021 17:17:47 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
964 07.06.2021 17:17:47 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
964 07.06.2021 17:17:47 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
964 07.06.2021 17:17:47 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
964 07.06.2021 17:17:47 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
964 07.06.2021 17:17:47 [KMG] debug: creating a new table: car.grade
964 07.06.2021 17:17:47 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
964 07.06.2021 17:17:47 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
964 07.06.2021 17:17:47 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
964 07.06.2021 17:17:47 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
964 07.06.2021 17:17:47 [KMG] debug: ROLLBACK
964 07.06.2021 17:17:51 [KMG] debug: START TRANSACTION
964 07.06.2021 17:17:51 [KMG] debug: SELECT * FROM current_schema()
964 07.06.2021 17:17:51 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
964 07.06.2021 17:17:51 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
964 07.06.2021 17:17:51 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
964 07.06.2021 17:17:51 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
964 07.06.2021 17:17:51 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
964 07.06.2021 17:17:51 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
964 07.06.2021 17:17:51 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
964 07.06.2021 17:17:51 [KMG] debug: creating a new table: car.grade
964 07.06.2021 17:17:51 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
964 07.06.2021 17:17:51 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
964 07.06.2021 17:17:51 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
964 07.06.2021 17:17:51 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
964 07.06.2021 17:17:51 [KMG] debug: ROLLBACK
964 07.06.2021 17:17:54 [KMG] debug: START TRANSACTION
964 07.06.2021 17:17:54 [KMG] debug: SELECT * FROM current_schema()
964 07.06.2021 17:17:54 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
964 07.06.2021 17:17:54 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
964 07.06.2021 17:17:54 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
964 07.06.2021 17:17:54 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
964 07.06.2021 17:17:54 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
964 07.06.2021 17:17:54 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
964 07.06.2021 17:17:54 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
964 07.06.2021 17:17:54 [KMG] debug: creating a new table: car.grade
964 07.06.2021 17:17:54 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
964 07.06.2021 17:17:54 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
964 07.06.2021 17:17:54 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
964 07.06.2021 17:17:54 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
964 07.06.2021 17:17:54 [KMG] debug: ROLLBACK
964 07.06.2021 17:17:57 [KMG] debug: START TRANSACTION
964 07.06.2021 17:17:57 [KMG] debug: SELECT * FROM current_schema()
964 07.06.2021 17:17:57 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
964 07.06.2021 17:17:57 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
964 07.06.2021 17:17:57 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
964 07.06.2021 17:17:57 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
964 07.06.2021 17:17:57 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
964 07.06.2021 17:17:57 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
964 07.06.2021 17:17:58 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
964 07.06.2021 17:17:58 [KMG] debug: creating a new table: car.grade
964 07.06.2021 17:17:58 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
964 07.06.2021 17:17:58 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
964 07.06.2021 17:17:58 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
964 07.06.2021 17:17:58 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
964 07.06.2021 17:17:58 [KMG] debug: ROLLBACK
964 07.06.2021 17:18:01 [KMG] debug: START TRANSACTION
964 07.06.2021 17:18:01 [KMG] debug: SELECT * FROM current_schema()
964 07.06.2021 17:18:01 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
964 07.06.2021 17:18:01 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
964 07.06.2021 17:18:01 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
964 07.06.2021 17:18:01 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
964 07.06.2021 17:18:01 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
964 07.06.2021 17:18:01 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
964 07.06.2021 17:18:01 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
964 07.06.2021 17:18:01 [KMG] debug: creating a new table: car.grade
964 07.06.2021 17:18:01 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
964 07.06.2021 17:18:01 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
964 07.06.2021 17:18:01 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
964 07.06.2021 17:18:01 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
964 07.06.2021 17:18:01 [KMG] debug: ROLLBACK
964 07.06.2021 17:18:04 [KMG] debug: START TRANSACTION
964 07.06.2021 17:18:04 [KMG] debug: SELECT * FROM current_schema()
964 07.06.2021 17:18:04 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
964 07.06.2021 17:18:04 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
964 07.06.2021 17:18:04 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
964 07.06.2021 17:18:04 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
964 07.06.2021 17:18:04 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
964 07.06.2021 17:18:04 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
964 07.06.2021 17:18:04 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
964 07.06.2021 17:18:04 [KMG] debug: creating a new table: car.grade
964 07.06.2021 17:18:04 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
964 07.06.2021 17:18:04 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
964 07.06.2021 17:18:04 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
964 07.06.2021 17:18:04 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
964 07.06.2021 17:18:04 [KMG] debug: ROLLBACK
964 07.06.2021 17:18:08 [KMG] debug: START TRANSACTION
964 07.06.2021 17:18:08 [KMG] debug: SELECT * FROM current_schema()
964 07.06.2021 17:18:08 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
964 07.06.2021 17:18:08 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
964 07.06.2021 17:18:08 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
964 07.06.2021 17:18:08 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
964 07.06.2021 17:18:08 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
964 07.06.2021 17:18:08 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
964 07.06.2021 17:18:08 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
964 07.06.2021 17:18:08 [KMG] debug: creating a new table: car.grade
964 07.06.2021 17:18:08 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
964 07.06.2021 17:18:08 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
964 07.06.2021 17:18:08 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
964 07.06.2021 17:18:08 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
964 07.06.2021 17:18:08 [KMG] debug: ROLLBACK
2452 07.06.2021 17:18:16 [KMG] debug: START TRANSACTION
2452 07.06.2021 17:18:16 [KMG] debug: SELECT * FROM current_schema()
2452 07.06.2021 17:18:16 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
2452 07.06.2021 17:18:16 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:16 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:16 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:16 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:16 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
2452 07.06.2021 17:18:16 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
2452 07.06.2021 17:18:16 [KMG] debug: creating a new table: car.grade
2452 07.06.2021 17:18:16 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:16 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
2452 07.06.2021 17:18:16 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:16 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
2452 07.06.2021 17:18:16 [KMG] debug: ROLLBACK
2452 07.06.2021 17:18:19 [KMG] debug: START TRANSACTION
2452 07.06.2021 17:18:19 [KMG] debug: SELECT * FROM current_schema()
2452 07.06.2021 17:18:19 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
2452 07.06.2021 17:18:19 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:19 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:19 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:19 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:19 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
2452 07.06.2021 17:18:20 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
2452 07.06.2021 17:18:20 [KMG] debug: creating a new table: car.grade
2452 07.06.2021 17:18:20 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:20 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
2452 07.06.2021 17:18:20 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:20 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
2452 07.06.2021 17:18:20 [KMG] debug: ROLLBACK
2452 07.06.2021 17:18:23 [KMG] debug: START TRANSACTION
2452 07.06.2021 17:18:23 [KMG] debug: SELECT * FROM current_schema()
2452 07.06.2021 17:18:23 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
2452 07.06.2021 17:18:23 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:23 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:23 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:23 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:23 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
2452 07.06.2021 17:18:23 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
2452 07.06.2021 17:18:23 [KMG] debug: creating a new table: car.grade
2452 07.06.2021 17:18:23 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:23 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
2452 07.06.2021 17:18:23 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:23 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
2452 07.06.2021 17:18:23 [KMG] debug: ROLLBACK
2452 07.06.2021 17:18:26 [KMG] debug: START TRANSACTION
2452 07.06.2021 17:18:26 [KMG] debug: SELECT * FROM current_schema()
2452 07.06.2021 17:18:26 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
2452 07.06.2021 17:18:26 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:26 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:26 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:26 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:26 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
2452 07.06.2021 17:18:26 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
2452 07.06.2021 17:18:26 [KMG] debug: creating a new table: car.grade
2452 07.06.2021 17:18:26 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:26 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
2452 07.06.2021 17:18:26 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:26 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
2452 07.06.2021 17:18:26 [KMG] debug: ROLLBACK
2452 07.06.2021 17:18:30 [KMG] debug: START TRANSACTION
2452 07.06.2021 17:18:30 [KMG] debug: SELECT * FROM current_schema()
2452 07.06.2021 17:18:30 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
2452 07.06.2021 17:18:30 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:30 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:30 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:30 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:30 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
2452 07.06.2021 17:18:30 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
2452 07.06.2021 17:18:30 [KMG] debug: creating a new table: car.grade
2452 07.06.2021 17:18:30 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:30 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
2452 07.06.2021 17:18:30 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:30 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
2452 07.06.2021 17:18:30 [KMG] debug: ROLLBACK
2452 07.06.2021 17:18:33 [KMG] debug: START TRANSACTION
2452 07.06.2021 17:18:33 [KMG] debug: SELECT * FROM current_schema()
2452 07.06.2021 17:18:33 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
2452 07.06.2021 17:18:33 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:33 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:33 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:33 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:33 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
2452 07.06.2021 17:18:33 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
2452 07.06.2021 17:18:33 [KMG] debug: creating a new table: car.grade
2452 07.06.2021 17:18:33 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:33 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
2452 07.06.2021 17:18:33 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:33 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
2452 07.06.2021 17:18:33 [KMG] debug: ROLLBACK
2452 07.06.2021 17:18:36 [KMG] debug: START TRANSACTION
2452 07.06.2021 17:18:36 [KMG] debug: SELECT * FROM current_schema()
2452 07.06.2021 17:18:36 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
2452 07.06.2021 17:18:36 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:36 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:36 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:36 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:36 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
2452 07.06.2021 17:18:36 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
2452 07.06.2021 17:18:36 [KMG] debug: creating a new table: car.grade
2452 07.06.2021 17:18:36 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:36 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
2452 07.06.2021 17:18:36 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:36 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
2452 07.06.2021 17:18:36 [KMG] debug: ROLLBACK
2452 07.06.2021 17:18:40 [KMG] debug: START TRANSACTION
2452 07.06.2021 17:18:40 [KMG] debug: SELECT * FROM current_schema()
2452 07.06.2021 17:18:40 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
2452 07.06.2021 17:18:40 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:40 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:40 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:40 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:40 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
2452 07.06.2021 17:18:40 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
2452 07.06.2021 17:18:40 [KMG] debug: creating a new table: car.grade
2452 07.06.2021 17:18:40 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:40 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
2452 07.06.2021 17:18:40 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:40 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
2452 07.06.2021 17:18:40 [KMG] debug: ROLLBACK
2452 07.06.2021 17:18:43 [KMG] debug: START TRANSACTION
2452 07.06.2021 17:18:43 [KMG] debug: SELECT * FROM current_schema()
2452 07.06.2021 17:18:43 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
2452 07.06.2021 17:18:43 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:43 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
2452 07.06.2021 17:18:43 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:43 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
2452 07.06.2021 17:18:43 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
2452 07.06.2021 17:18:43 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
2452 07.06.2021 17:18:43 [KMG] debug: creating a new table: car.grade
2452 07.06.2021 17:18:43 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:43 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
2452 07.06.2021 17:18:43 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
2452 07.06.2021 17:18:43 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
2452 07.06.2021 17:18:43 [KMG] debug: ROLLBACK
9872 07.06.2021 17:22:22 [KMG] debug: START TRANSACTION
9872 07.06.2021 17:22:22 [KMG] debug: SELECT * FROM current_schema()
9872 07.06.2021 17:22:22 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
9872 07.06.2021 17:22:22 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
9872 07.06.2021 17:22:22 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
9872 07.06.2021 17:22:22 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
9872 07.06.2021 17:22:22 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
9872 07.06.2021 17:22:22 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
9872 07.06.2021 17:22:22 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
9872 07.06.2021 17:22:22 [KMG] debug: creating a new table: car.grade
9872 07.06.2021 17:22:22 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
9872 07.06.2021 17:22:22 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
9872 07.06.2021 17:22:22 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
9872 07.06.2021 17:22:22 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
9872 07.06.2021 17:22:22 [KMG] debug: ROLLBACK
9872 07.06.2021 17:22:26 [KMG] debug: START TRANSACTION
9872 07.06.2021 17:22:26 [KMG] debug: SELECT * FROM current_schema()
9872 07.06.2021 17:22:26 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
9872 07.06.2021 17:22:26 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
9872 07.06.2021 17:22:26 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
9872 07.06.2021 17:22:26 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
9872 07.06.2021 17:22:26 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
9872 07.06.2021 17:22:26 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
9872 07.06.2021 17:22:26 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
9872 07.06.2021 17:22:26 [KMG] debug: creating a new table: car.grade
9872 07.06.2021 17:22:26 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
9872 07.06.2021 17:22:26 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
9872 07.06.2021 17:22:26 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
9872 07.06.2021 17:22:26 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
9872 07.06.2021 17:22:26 [KMG] debug: ROLLBACK
9872 07.06.2021 17:22:29 [KMG] debug: START TRANSACTION
9872 07.06.2021 17:22:29 [KMG] debug: SELECT * FROM current_schema()
9872 07.06.2021 17:22:29 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
9872 07.06.2021 17:22:29 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
9872 07.06.2021 17:22:29 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
9872 07.06.2021 17:22:29 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
9872 07.06.2021 17:22:29 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
9872 07.06.2021 17:22:29 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
9872 07.06.2021 17:22:29 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
9872 07.06.2021 17:22:29 [KMG] debug: creating a new table: car.grade
9872 07.06.2021 17:22:29 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
9872 07.06.2021 17:22:29 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
9872 07.06.2021 17:22:29 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
9872 07.06.2021 17:22:29 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
9872 07.06.2021 17:22:29 [KMG] debug: ROLLBACK
1600 07.06.2021 17:22:34 [KMG] debug: START TRANSACTION
1600 07.06.2021 17:22:34 [KMG] debug: SELECT * FROM current_schema()
1600 07.06.2021 17:22:34 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
1600 07.06.2021 17:22:34 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:22:34 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:22:34 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:22:34 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:22:34 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
1600 07.06.2021 17:22:34 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
1600 07.06.2021 17:22:34 [KMG] debug: creating a new table: car.grade
1600 07.06.2021 17:22:34 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:22:34 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
1600 07.06.2021 17:22:34 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:22:34 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
1600 07.06.2021 17:22:34 [KMG] debug: ROLLBACK
1600 07.06.2021 17:22:38 [KMG] debug: START TRANSACTION
1600 07.06.2021 17:22:38 [KMG] debug: SELECT * FROM current_schema()
1600 07.06.2021 17:22:38 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
1600 07.06.2021 17:22:38 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:22:38 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:22:38 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:22:38 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:22:38 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
1600 07.06.2021 17:22:38 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
1600 07.06.2021 17:22:38 [KMG] debug: creating a new table: car.grade
1600 07.06.2021 17:22:38 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:22:38 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
1600 07.06.2021 17:22:38 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:22:38 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
1600 07.06.2021 17:22:38 [KMG] debug: ROLLBACK
1600 07.06.2021 17:22:41 [KMG] debug: START TRANSACTION
1600 07.06.2021 17:22:41 [KMG] debug: SELECT * FROM current_schema()
1600 07.06.2021 17:22:41 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
1600 07.06.2021 17:22:41 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:22:41 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:22:41 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:22:41 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:22:41 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
1600 07.06.2021 17:22:41 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
1600 07.06.2021 17:22:41 [KMG] debug: creating a new table: car.grade
1600 07.06.2021 17:22:41 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:22:41 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
1600 07.06.2021 17:22:41 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:22:41 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
1600 07.06.2021 17:22:41 [KMG] debug: ROLLBACK
1600 07.06.2021 17:22:44 [KMG] debug: START TRANSACTION
1600 07.06.2021 17:22:44 [KMG] debug: SELECT * FROM current_schema()
1600 07.06.2021 17:22:44 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
1600 07.06.2021 17:22:44 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:22:44 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:22:44 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:22:44 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:22:44 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
1600 07.06.2021 17:22:44 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
1600 07.06.2021 17:22:44 [KMG] debug: creating a new table: car.grade
1600 07.06.2021 17:22:44 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:22:44 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
1600 07.06.2021 17:22:44 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:22:44 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
1600 07.06.2021 17:22:44 [KMG] debug: ROLLBACK
1600 07.06.2021 17:22:48 [KMG] debug: START TRANSACTION
1600 07.06.2021 17:22:48 [KMG] debug: SELECT * FROM current_schema()
1600 07.06.2021 17:22:48 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
1600 07.06.2021 17:22:48 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:22:48 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:22:48 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:22:48 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:22:48 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
1600 07.06.2021 17:22:48 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
1600 07.06.2021 17:22:48 [KMG] debug: creating a new table: car.grade
1600 07.06.2021 17:22:48 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:22:48 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
1600 07.06.2021 17:22:48 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:22:48 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
1600 07.06.2021 17:22:48 [KMG] debug: ROLLBACK
1600 07.06.2021 17:22:51 [KMG] debug: START TRANSACTION
1600 07.06.2021 17:22:51 [KMG] debug: SELECT * FROM current_schema()
1600 07.06.2021 17:22:51 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
1600 07.06.2021 17:22:52 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:22:52 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:22:52 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:22:52 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:22:52 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
1600 07.06.2021 17:22:52 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
1600 07.06.2021 17:22:52 [KMG] debug: creating a new table: car.grade
1600 07.06.2021 17:22:52 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:22:52 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
1600 07.06.2021 17:22:52 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:22:52 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
1600 07.06.2021 17:22:52 [KMG] debug: ROLLBACK
1600 07.06.2021 17:22:55 [KMG] debug: START TRANSACTION
1600 07.06.2021 17:22:55 [KMG] debug: SELECT * FROM current_schema()
1600 07.06.2021 17:22:55 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
1600 07.06.2021 17:22:55 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:22:55 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:22:55 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:22:55 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:22:55 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
1600 07.06.2021 17:22:55 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
1600 07.06.2021 17:22:55 [KMG] debug: creating a new table: car.grade
1600 07.06.2021 17:22:55 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:22:55 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
1600 07.06.2021 17:22:55 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:22:55 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
1600 07.06.2021 17:22:55 [KMG] debug: ROLLBACK
1600 07.06.2021 17:22:58 [KMG] debug: START TRANSACTION
1600 07.06.2021 17:22:58 [KMG] debug: SELECT * FROM current_schema()
1600 07.06.2021 17:22:58 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
1600 07.06.2021 17:22:58 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:22:58 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:22:58 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:22:58 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:22:58 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
1600 07.06.2021 17:22:58 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
1600 07.06.2021 17:22:58 [KMG] debug: creating a new table: car.grade
1600 07.06.2021 17:22:58 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:22:58 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
1600 07.06.2021 17:22:58 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:22:58 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
1600 07.06.2021 17:22:58 [KMG] debug: ROLLBACK
1600 07.06.2021 17:23:01 [KMG] debug: START TRANSACTION
1600 07.06.2021 17:23:01 [KMG] debug: SELECT * FROM current_schema()
1600 07.06.2021 17:23:01 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
1600 07.06.2021 17:23:01 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:23:01 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
1600 07.06.2021 17:23:01 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:23:01 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
1600 07.06.2021 17:23:02 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
1600 07.06.2021 17:23:02 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
1600 07.06.2021 17:23:02 [KMG] debug: creating a new table: car.grade
1600 07.06.2021 17:23:02 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:23:02 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
1600 07.06.2021 17:23:02 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
1600 07.06.2021 17:23:02 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
1600 07.06.2021 17:23:02 [KMG] debug: ROLLBACK
11924 07.06.2021 17:40:16 [KMG] debug: START TRANSACTION
11924 07.06.2021 17:40:16 [KMG] debug: SELECT * FROM current_schema()
11924 07.06.2021 17:40:16 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
11924 07.06.2021 17:40:16 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:16 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:16 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:16 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:16 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
11924 07.06.2021 17:40:16 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
11924 07.06.2021 17:40:16 [KMG] debug: creating a new table: car.grade
11924 07.06.2021 17:40:16 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:16 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
11924 07.06.2021 17:40:16 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:16 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
11924 07.06.2021 17:40:16 [KMG] debug: ROLLBACK
11924 07.06.2021 17:40:19 [KMG] debug: START TRANSACTION
11924 07.06.2021 17:40:19 [KMG] debug: SELECT * FROM current_schema()
11924 07.06.2021 17:40:19 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
11924 07.06.2021 17:40:19 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:19 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:19 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:19 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:19 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
11924 07.06.2021 17:40:19 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
11924 07.06.2021 17:40:19 [KMG] debug: creating a new table: car.grade
11924 07.06.2021 17:40:19 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:19 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
11924 07.06.2021 17:40:19 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:19 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
11924 07.06.2021 17:40:19 [KMG] debug: ROLLBACK
11924 07.06.2021 17:40:23 [KMG] debug: START TRANSACTION
11924 07.06.2021 17:40:23 [KMG] debug: SELECT * FROM current_schema()
11924 07.06.2021 17:40:23 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
11924 07.06.2021 17:40:23 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:23 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:23 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:23 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:23 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
11924 07.06.2021 17:40:23 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
11924 07.06.2021 17:40:23 [KMG] debug: creating a new table: car.grade
11924 07.06.2021 17:40:23 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:23 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
11924 07.06.2021 17:40:23 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:23 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
11924 07.06.2021 17:40:23 [KMG] debug: ROLLBACK
11924 07.06.2021 17:40:26 [KMG] debug: START TRANSACTION
11924 07.06.2021 17:40:26 [KMG] debug: SELECT * FROM current_schema()
11924 07.06.2021 17:40:26 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
11924 07.06.2021 17:40:26 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:26 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:26 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:26 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:26 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
11924 07.06.2021 17:40:26 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
11924 07.06.2021 17:40:26 [KMG] debug: creating a new table: car.grade
11924 07.06.2021 17:40:26 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:26 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
11924 07.06.2021 17:40:26 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:26 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
11924 07.06.2021 17:40:26 [KMG] debug: ROLLBACK
11924 07.06.2021 17:40:29 [KMG] debug: START TRANSACTION
11924 07.06.2021 17:40:29 [KMG] debug: SELECT * FROM current_schema()
11924 07.06.2021 17:40:29 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
11924 07.06.2021 17:40:29 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:29 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:29 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:29 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:29 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
11924 07.06.2021 17:40:29 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
11924 07.06.2021 17:40:29 [KMG] debug: creating a new table: car.grade
11924 07.06.2021 17:40:29 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:29 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
11924 07.06.2021 17:40:29 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:29 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
11924 07.06.2021 17:40:29 [KMG] debug: ROLLBACK
11924 07.06.2021 17:40:33 [KMG] debug: START TRANSACTION
11924 07.06.2021 17:40:33 [KMG] debug: SELECT * FROM current_schema()
11924 07.06.2021 17:40:33 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
11924 07.06.2021 17:40:33 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:33 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:33 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:33 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:33 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
11924 07.06.2021 17:40:33 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
11924 07.06.2021 17:40:33 [KMG] debug: creating a new table: car.grade
11924 07.06.2021 17:40:33 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:33 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
11924 07.06.2021 17:40:33 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:33 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
11924 07.06.2021 17:40:33 [KMG] debug: ROLLBACK
11924 07.06.2021 17:40:36 [KMG] debug: START TRANSACTION
11924 07.06.2021 17:40:36 [KMG] debug: SELECT * FROM current_schema()
11924 07.06.2021 17:40:36 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
11924 07.06.2021 17:40:36 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:36 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:36 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:36 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:36 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
11924 07.06.2021 17:40:36 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
11924 07.06.2021 17:40:36 [KMG] debug: creating a new table: car.grade
11924 07.06.2021 17:40:36 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:36 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
11924 07.06.2021 17:40:36 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:36 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
11924 07.06.2021 17:40:36 [KMG] debug: ROLLBACK
11924 07.06.2021 17:40:39 [KMG] debug: START TRANSACTION
11924 07.06.2021 17:40:39 [KMG] debug: SELECT * FROM current_schema()
11924 07.06.2021 17:40:39 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
11924 07.06.2021 17:40:39 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:39 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:39 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:39 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:39 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
11924 07.06.2021 17:40:40 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
11924 07.06.2021 17:40:40 [KMG] debug: creating a new table: car.grade
11924 07.06.2021 17:40:40 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:40 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
11924 07.06.2021 17:40:40 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:40 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
11924 07.06.2021 17:40:40 [KMG] debug: ROLLBACK
11924 07.06.2021 17:40:43 [KMG] debug: START TRANSACTION
11924 07.06.2021 17:40:43 [KMG] debug: SELECT * FROM current_schema()
11924 07.06.2021 17:40:43 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
11924 07.06.2021 17:40:43 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:43 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11924 07.06.2021 17:40:43 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:43 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11924 07.06.2021 17:40:43 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
11924 07.06.2021 17:40:43 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
11924 07.06.2021 17:40:43 [KMG] debug: creating a new table: car.grade
11924 07.06.2021 17:40:43 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:43 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
11924 07.06.2021 17:40:43 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11924 07.06.2021 17:40:43 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
11924 07.06.2021 17:40:43 [KMG] debug: ROLLBACK
5572 07.06.2021 17:42:21 [KMG] debug: START TRANSACTION
5572 07.06.2021 17:42:21 [KMG] debug: SELECT * FROM current_schema()
5572 07.06.2021 17:42:21 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
5572 07.06.2021 17:42:21 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:21 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:21 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:21 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:21 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
5572 07.06.2021 17:42:21 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
5572 07.06.2021 17:42:21 [KMG] debug: creating a new table: car.grade
5572 07.06.2021 17:42:21 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:21 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
5572 07.06.2021 17:42:21 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:21 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
5572 07.06.2021 17:42:21 [KMG] debug: ROLLBACK
5572 07.06.2021 17:42:24 [KMG] debug: START TRANSACTION
5572 07.06.2021 17:42:24 [KMG] debug: SELECT * FROM current_schema()
5572 07.06.2021 17:42:24 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
5572 07.06.2021 17:42:24 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:24 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:24 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:24 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:24 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
5572 07.06.2021 17:42:24 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
5572 07.06.2021 17:42:24 [KMG] debug: creating a new table: car.grade
5572 07.06.2021 17:42:24 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:24 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
5572 07.06.2021 17:42:24 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:24 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
5572 07.06.2021 17:42:24 [KMG] debug: ROLLBACK
5572 07.06.2021 17:42:28 [KMG] debug: START TRANSACTION
5572 07.06.2021 17:42:28 [KMG] debug: SELECT * FROM current_schema()
5572 07.06.2021 17:42:28 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
5572 07.06.2021 17:42:28 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:28 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:28 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:28 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:28 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
5572 07.06.2021 17:42:28 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
5572 07.06.2021 17:42:28 [KMG] debug: creating a new table: car.grade
5572 07.06.2021 17:42:28 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:28 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
5572 07.06.2021 17:42:28 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:28 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
5572 07.06.2021 17:42:28 [KMG] debug: ROLLBACK
5572 07.06.2021 17:42:31 [KMG] debug: START TRANSACTION
5572 07.06.2021 17:42:31 [KMG] debug: SELECT * FROM current_schema()
5572 07.06.2021 17:42:31 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
5572 07.06.2021 17:42:31 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:31 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:31 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:31 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:31 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
5572 07.06.2021 17:42:31 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
5572 07.06.2021 17:42:31 [KMG] debug: creating a new table: car.grade
5572 07.06.2021 17:42:31 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:31 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
5572 07.06.2021 17:42:31 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:31 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
5572 07.06.2021 17:42:31 [KMG] debug: ROLLBACK
5572 07.06.2021 17:42:34 [KMG] debug: START TRANSACTION
5572 07.06.2021 17:42:34 [KMG] debug: SELECT * FROM current_schema()
5572 07.06.2021 17:42:34 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
5572 07.06.2021 17:42:34 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:34 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:34 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:35 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:35 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
5572 07.06.2021 17:42:35 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
5572 07.06.2021 17:42:35 [KMG] debug: creating a new table: car.grade
5572 07.06.2021 17:42:35 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:35 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
5572 07.06.2021 17:42:35 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:35 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
5572 07.06.2021 17:42:35 [KMG] debug: ROLLBACK
5572 07.06.2021 17:42:38 [KMG] debug: START TRANSACTION
5572 07.06.2021 17:42:38 [KMG] debug: SELECT * FROM current_schema()
5572 07.06.2021 17:42:38 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
5572 07.06.2021 17:42:38 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:38 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:38 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:38 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:38 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
5572 07.06.2021 17:42:38 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
5572 07.06.2021 17:42:38 [KMG] debug: creating a new table: car.grade
5572 07.06.2021 17:42:38 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:38 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
5572 07.06.2021 17:42:38 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:38 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
5572 07.06.2021 17:42:38 [KMG] debug: ROLLBACK
5572 07.06.2021 17:42:41 [KMG] debug: START TRANSACTION
5572 07.06.2021 17:42:41 [KMG] debug: SELECT * FROM current_schema()
5572 07.06.2021 17:42:41 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
5572 07.06.2021 17:42:41 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:41 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:41 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:41 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:41 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
5572 07.06.2021 17:42:41 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
5572 07.06.2021 17:42:41 [KMG] debug: creating a new table: car.grade
5572 07.06.2021 17:42:41 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:41 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
5572 07.06.2021 17:42:41 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:41 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
5572 07.06.2021 17:42:41 [KMG] debug: ROLLBACK
5572 07.06.2021 17:42:44 [KMG] debug: START TRANSACTION
5572 07.06.2021 17:42:44 [KMG] debug: SELECT * FROM current_schema()
5572 07.06.2021 17:42:44 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
5572 07.06.2021 17:42:45 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:45 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:45 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:45 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:45 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
5572 07.06.2021 17:42:45 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
5572 07.06.2021 17:42:45 [KMG] debug: creating a new table: car.grade
5572 07.06.2021 17:42:45 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:45 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
5572 07.06.2021 17:42:45 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:45 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
5572 07.06.2021 17:42:45 [KMG] debug: ROLLBACK
5572 07.06.2021 17:42:48 [KMG] debug: START TRANSACTION
5572 07.06.2021 17:42:48 [KMG] debug: SELECT * FROM current_schema()
5572 07.06.2021 17:42:48 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
5572 07.06.2021 17:42:48 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:48 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5572 07.06.2021 17:42:48 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:48 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5572 07.06.2021 17:42:48 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
5572 07.06.2021 17:42:48 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
5572 07.06.2021 17:42:48 [KMG] debug: creating a new table: car.grade
5572 07.06.2021 17:42:48 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:48 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
5572 07.06.2021 17:42:48 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
5572 07.06.2021 17:42:48 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
5572 07.06.2021 17:42:48 [KMG] debug: ROLLBACK
3572 07.06.2021 17:43:11 [KMG] debug: START TRANSACTION
3572 07.06.2021 17:43:11 [KMG] debug: SELECT * FROM current_schema()
3572 07.06.2021 17:43:11 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
3572 07.06.2021 17:43:11 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:11 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:11 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:11 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:11 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
3572 07.06.2021 17:43:11 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
3572 07.06.2021 17:43:11 [KMG] debug: creating a new table: car.grade
3572 07.06.2021 17:43:11 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:11 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
3572 07.06.2021 17:43:11 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:11 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
3572 07.06.2021 17:43:11 [KMG] debug: ROLLBACK
3572 07.06.2021 17:43:14 [KMG] debug: START TRANSACTION
3572 07.06.2021 17:43:14 [KMG] debug: SELECT * FROM current_schema()
3572 07.06.2021 17:43:14 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
3572 07.06.2021 17:43:14 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:14 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:14 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:14 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:14 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
3572 07.06.2021 17:43:14 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
3572 07.06.2021 17:43:14 [KMG] debug: creating a new table: car.grade
3572 07.06.2021 17:43:14 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:14 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
3572 07.06.2021 17:43:14 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:14 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
3572 07.06.2021 17:43:14 [KMG] debug: ROLLBACK
3572 07.06.2021 17:43:18 [KMG] debug: START TRANSACTION
3572 07.06.2021 17:43:18 [KMG] debug: SELECT * FROM current_schema()
3572 07.06.2021 17:43:18 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
3572 07.06.2021 17:43:18 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:18 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:18 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:18 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:18 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
3572 07.06.2021 17:43:18 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
3572 07.06.2021 17:43:18 [KMG] debug: creating a new table: car.grade
3572 07.06.2021 17:43:18 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:18 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
3572 07.06.2021 17:43:18 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:18 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
3572 07.06.2021 17:43:18 [KMG] debug: ROLLBACK
3572 07.06.2021 17:43:21 [KMG] debug: START TRANSACTION
3572 07.06.2021 17:43:21 [KMG] debug: SELECT * FROM current_schema()
3572 07.06.2021 17:43:21 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
3572 07.06.2021 17:43:21 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:21 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:21 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:21 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:21 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
3572 07.06.2021 17:43:21 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
3572 07.06.2021 17:43:21 [KMG] debug: creating a new table: car.grade
3572 07.06.2021 17:43:21 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:21 [KMG] error: {
  "length": 97,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
3572 07.06.2021 17:43:21 [KMG] error: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:21 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    }
  ]
}
3572 07.06.2021 17:43:21 [KMG] debug: ROLLBACK
3572 07.06.2021 17:43:24 [KMG] debug: START TRANSACTION
3572 07.06.2021 17:43:24 [KMG] debug: SELECT * FROM current_schema()
3572 07.06.2021 17:43:24 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
3572 07.06.2021 17:43:24 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:24 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:24 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:24 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:24 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
3572 07.06.2021 17:43:24 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
3572 07.06.2021 17:43:24 [KMG] debug: creating a new table: car.grade
3572 07.06.2021 17:43:24 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:25 [KMG] debug: creating a new table: car.like
3572 07.06.2021 17:43:25 [KMG] debug: CREATE TABLE "car"."like" ("id" BIGSERIAL NOT NULL, "isLike" boolean NOT NULL DEFAULT false, CONSTRAINT "PK_6ff1e68877e8b48e7531a313c72" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:25 [KMG] debug: creating a new table: car.comment
3572 07.06.2021 17:43:25 [KMG] debug: CREATE TABLE "car"."comment" ("id" BIGSERIAL NOT NULL, "createDate" date, "user_id" bigint, "car_id" bigint, CONSTRAINT "PK_7ba0190c3e9faa92d05cd5a1664" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:25 [KMG] debug: creating a new table: security.user
3572 07.06.2021 17:43:25 [KMG] debug: CREATE TABLE "security"."user" ("id" BIGSERIAL NOT NULL, "image" character varying(128), "name" character varying(128) NOT NULL, "surname" character varying(128) NOT NULL, "secondname" character varying(128), "email" character varying(128) NOT NULL, "phone" character varying(128), "password" character varying NOT NULL, CONSTRAINT "PK_8ef7be7d4560609cbc83aae4da3" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:25 [KMG] error: {
  "length": 102,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
3572 07.06.2021 17:43:25 [KMG] error: CREATE TABLE "security"."user" ("id" BIGSERIAL NOT NULL, "image" character varying(128), "name" character varying(128) NOT NULL, "surname" character varying(128) NOT NULL, "secondname" character varying(128), "email" character varying(128) NOT NULL, "phone" character varying(128), "password" character varying NOT NULL, CONSTRAINT "PK_8ef7be7d4560609cbc83aae4da3" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:25 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    },
    {
      "query": "CREATE TABLE \"car\".\"like\" (\"id\" BIGSERIAL NOT NULL, \"isLike\" boolean NOT NULL DEFAULT false, CONSTRAINT \"PK_6ff1e68877e8b48e7531a313c72\" PRIMARY KEY (\"id\"))"
    },
    {
      "query": "CREATE TABLE \"car\".\"comment\" (\"id\" BIGSERIAL NOT NULL, \"createDate\" date, \"user_id\" bigint, \"car_id\" bigint, CONSTRAINT \"PK_7ba0190c3e9faa92d05cd5a1664\" PRIMARY KEY (\"id\"))"
    },
    {
      "query": "CREATE TABLE \"security\".\"user\" (\"id\" BIGSERIAL NOT NULL, \"image\" character varying(128), \"name\" character varying(128) NOT NULL, \"surname\" character varying(128) NOT NULL, \"secondname\" character varying(128), \"email\" character varying(128) NOT NULL, \"phone\" character varying(128), \"password\" character varying NOT NULL, CONSTRAINT \"PK_8ef7be7d4560609cbc83aae4da3\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    },
    {
      "query": "DROP TABLE \"car\".\"like\""
    },
    {
      "query": "DROP TABLE \"car\".\"comment\""
    },
    {
      "query": "DROP TABLE \"security\".\"user\""
    }
  ]
}
3572 07.06.2021 17:43:25 [KMG] debug: ROLLBACK
3572 07.06.2021 17:43:28 [KMG] debug: START TRANSACTION
3572 07.06.2021 17:43:28 [KMG] debug: SELECT * FROM current_schema()
3572 07.06.2021 17:43:28 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
3572 07.06.2021 17:43:28 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:28 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:28 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:28 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:28 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
3572 07.06.2021 17:43:28 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
3572 07.06.2021 17:43:29 [KMG] debug: creating a new table: car.grade
3572 07.06.2021 17:43:29 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:29 [KMG] debug: creating a new table: car.like
3572 07.06.2021 17:43:29 [KMG] debug: CREATE TABLE "car"."like" ("id" BIGSERIAL NOT NULL, "isLike" boolean NOT NULL DEFAULT false, CONSTRAINT "PK_6ff1e68877e8b48e7531a313c72" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:29 [KMG] debug: creating a new table: car.comment
3572 07.06.2021 17:43:29 [KMG] debug: CREATE TABLE "car"."comment" ("id" BIGSERIAL NOT NULL, "createDate" date, "user_id" bigint, "car_id" bigint, CONSTRAINT "PK_7ba0190c3e9faa92d05cd5a1664" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:29 [KMG] debug: creating a new table: security.user
3572 07.06.2021 17:43:29 [KMG] debug: CREATE TABLE "security"."user" ("id" BIGSERIAL NOT NULL, "image" character varying(128), "name" character varying(128) NOT NULL, "surname" character varying(128) NOT NULL, "secondname" character varying(128), "email" character varying(128) NOT NULL, "phone" character varying(128), "password" character varying NOT NULL, CONSTRAINT "PK_8ef7be7d4560609cbc83aae4da3" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:29 [KMG] error: {
  "length": 102,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
3572 07.06.2021 17:43:29 [KMG] error: CREATE TABLE "security"."user" ("id" BIGSERIAL NOT NULL, "image" character varying(128), "name" character varying(128) NOT NULL, "surname" character varying(128) NOT NULL, "secondname" character varying(128), "email" character varying(128) NOT NULL, "phone" character varying(128), "password" character varying NOT NULL, CONSTRAINT "PK_8ef7be7d4560609cbc83aae4da3" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:29 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    },
    {
      "query": "CREATE TABLE \"car\".\"like\" (\"id\" BIGSERIAL NOT NULL, \"isLike\" boolean NOT NULL DEFAULT false, CONSTRAINT \"PK_6ff1e68877e8b48e7531a313c72\" PRIMARY KEY (\"id\"))"
    },
    {
      "query": "CREATE TABLE \"car\".\"comment\" (\"id\" BIGSERIAL NOT NULL, \"createDate\" date, \"user_id\" bigint, \"car_id\" bigint, CONSTRAINT \"PK_7ba0190c3e9faa92d05cd5a1664\" PRIMARY KEY (\"id\"))"
    },
    {
      "query": "CREATE TABLE \"security\".\"user\" (\"id\" BIGSERIAL NOT NULL, \"image\" character varying(128), \"name\" character varying(128) NOT NULL, \"surname\" character varying(128) NOT NULL, \"secondname\" character varying(128), \"email\" character varying(128) NOT NULL, \"phone\" character varying(128), \"password\" character varying NOT NULL, CONSTRAINT \"PK_8ef7be7d4560609cbc83aae4da3\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    },
    {
      "query": "DROP TABLE \"car\".\"like\""
    },
    {
      "query": "DROP TABLE \"car\".\"comment\""
    },
    {
      "query": "DROP TABLE \"security\".\"user\""
    }
  ]
}
3572 07.06.2021 17:43:29 [KMG] debug: ROLLBACK
3572 07.06.2021 17:43:32 [KMG] debug: START TRANSACTION
3572 07.06.2021 17:43:32 [KMG] debug: SELECT * FROM current_schema()
3572 07.06.2021 17:43:32 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
3572 07.06.2021 17:43:32 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:32 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:32 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:32 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:32 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
3572 07.06.2021 17:43:32 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
3572 07.06.2021 17:43:32 [KMG] debug: creating a new table: car.grade
3572 07.06.2021 17:43:32 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:32 [KMG] debug: creating a new table: car.like
3572 07.06.2021 17:43:32 [KMG] debug: CREATE TABLE "car"."like" ("id" BIGSERIAL NOT NULL, "isLike" boolean NOT NULL DEFAULT false, CONSTRAINT "PK_6ff1e68877e8b48e7531a313c72" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:32 [KMG] debug: creating a new table: car.comment
3572 07.06.2021 17:43:32 [KMG] debug: CREATE TABLE "car"."comment" ("id" BIGSERIAL NOT NULL, "createDate" date, "user_id" bigint, "car_id" bigint, CONSTRAINT "PK_7ba0190c3e9faa92d05cd5a1664" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:32 [KMG] debug: creating a new table: security.user
3572 07.06.2021 17:43:32 [KMG] debug: CREATE TABLE "security"."user" ("id" BIGSERIAL NOT NULL, "image" character varying(128), "name" character varying(128) NOT NULL, "surname" character varying(128) NOT NULL, "secondname" character varying(128), "email" character varying(128) NOT NULL, "phone" character varying(128), "password" character varying NOT NULL, CONSTRAINT "PK_8ef7be7d4560609cbc83aae4da3" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:32 [KMG] error: {
  "length": 102,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
3572 07.06.2021 17:43:32 [KMG] error: CREATE TABLE "security"."user" ("id" BIGSERIAL NOT NULL, "image" character varying(128), "name" character varying(128) NOT NULL, "surname" character varying(128) NOT NULL, "secondname" character varying(128), "email" character varying(128) NOT NULL, "phone" character varying(128), "password" character varying NOT NULL, CONSTRAINT "PK_8ef7be7d4560609cbc83aae4da3" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:32 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    },
    {
      "query": "CREATE TABLE \"car\".\"like\" (\"id\" BIGSERIAL NOT NULL, \"isLike\" boolean NOT NULL DEFAULT false, CONSTRAINT \"PK_6ff1e68877e8b48e7531a313c72\" PRIMARY KEY (\"id\"))"
    },
    {
      "query": "CREATE TABLE \"car\".\"comment\" (\"id\" BIGSERIAL NOT NULL, \"createDate\" date, \"user_id\" bigint, \"car_id\" bigint, CONSTRAINT \"PK_7ba0190c3e9faa92d05cd5a1664\" PRIMARY KEY (\"id\"))"
    },
    {
      "query": "CREATE TABLE \"security\".\"user\" (\"id\" BIGSERIAL NOT NULL, \"image\" character varying(128), \"name\" character varying(128) NOT NULL, \"surname\" character varying(128) NOT NULL, \"secondname\" character varying(128), \"email\" character varying(128) NOT NULL, \"phone\" character varying(128), \"password\" character varying NOT NULL, CONSTRAINT \"PK_8ef7be7d4560609cbc83aae4da3\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    },
    {
      "query": "DROP TABLE \"car\".\"like\""
    },
    {
      "query": "DROP TABLE \"car\".\"comment\""
    },
    {
      "query": "DROP TABLE \"security\".\"user\""
    }
  ]
}
3572 07.06.2021 17:43:32 [KMG] debug: ROLLBACK
3572 07.06.2021 17:43:35 [KMG] debug: START TRANSACTION
3572 07.06.2021 17:43:35 [KMG] debug: SELECT * FROM current_schema()
3572 07.06.2021 17:43:35 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
3572 07.06.2021 17:43:36 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:36 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:36 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:36 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:36 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
3572 07.06.2021 17:43:36 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
3572 07.06.2021 17:43:36 [KMG] debug: creating a new table: car.grade
3572 07.06.2021 17:43:36 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:36 [KMG] debug: creating a new table: car.like
3572 07.06.2021 17:43:36 [KMG] debug: CREATE TABLE "car"."like" ("id" BIGSERIAL NOT NULL, "isLike" boolean NOT NULL DEFAULT false, CONSTRAINT "PK_6ff1e68877e8b48e7531a313c72" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:36 [KMG] debug: creating a new table: car.comment
3572 07.06.2021 17:43:36 [KMG] debug: CREATE TABLE "car"."comment" ("id" BIGSERIAL NOT NULL, "createDate" date, "user_id" bigint, "car_id" bigint, CONSTRAINT "PK_7ba0190c3e9faa92d05cd5a1664" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:36 [KMG] debug: creating a new table: security.user
3572 07.06.2021 17:43:36 [KMG] debug: CREATE TABLE "security"."user" ("id" BIGSERIAL NOT NULL, "image" character varying(128), "name" character varying(128) NOT NULL, "surname" character varying(128) NOT NULL, "secondname" character varying(128), "email" character varying(128) NOT NULL, "phone" character varying(128), "password" character varying NOT NULL, CONSTRAINT "PK_8ef7be7d4560609cbc83aae4da3" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:36 [KMG] error: {
  "length": 102,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
3572 07.06.2021 17:43:36 [KMG] error: CREATE TABLE "security"."user" ("id" BIGSERIAL NOT NULL, "image" character varying(128), "name" character varying(128) NOT NULL, "surname" character varying(128) NOT NULL, "secondname" character varying(128), "email" character varying(128) NOT NULL, "phone" character varying(128), "password" character varying NOT NULL, CONSTRAINT "PK_8ef7be7d4560609cbc83aae4da3" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:36 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    },
    {
      "query": "CREATE TABLE \"car\".\"like\" (\"id\" BIGSERIAL NOT NULL, \"isLike\" boolean NOT NULL DEFAULT false, CONSTRAINT \"PK_6ff1e68877e8b48e7531a313c72\" PRIMARY KEY (\"id\"))"
    },
    {
      "query": "CREATE TABLE \"car\".\"comment\" (\"id\" BIGSERIAL NOT NULL, \"createDate\" date, \"user_id\" bigint, \"car_id\" bigint, CONSTRAINT \"PK_7ba0190c3e9faa92d05cd5a1664\" PRIMARY KEY (\"id\"))"
    },
    {
      "query": "CREATE TABLE \"security\".\"user\" (\"id\" BIGSERIAL NOT NULL, \"image\" character varying(128), \"name\" character varying(128) NOT NULL, \"surname\" character varying(128) NOT NULL, \"secondname\" character varying(128), \"email\" character varying(128) NOT NULL, \"phone\" character varying(128), \"password\" character varying NOT NULL, CONSTRAINT \"PK_8ef7be7d4560609cbc83aae4da3\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    },
    {
      "query": "DROP TABLE \"car\".\"like\""
    },
    {
      "query": "DROP TABLE \"car\".\"comment\""
    },
    {
      "query": "DROP TABLE \"security\".\"user\""
    }
  ]
}
3572 07.06.2021 17:43:36 [KMG] debug: ROLLBACK
3572 07.06.2021 17:43:39 [KMG] debug: START TRANSACTION
3572 07.06.2021 17:43:39 [KMG] debug: SELECT * FROM current_schema()
3572 07.06.2021 17:43:39 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
3572 07.06.2021 17:43:39 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:39 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
3572 07.06.2021 17:43:39 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:39 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
3572 07.06.2021 17:43:39 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
3572 07.06.2021 17:43:39 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
3572 07.06.2021 17:43:39 [KMG] debug: creating a new table: car.grade
3572 07.06.2021 17:43:39 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:39 [KMG] debug: creating a new table: car.like
3572 07.06.2021 17:43:39 [KMG] debug: CREATE TABLE "car"."like" ("id" BIGSERIAL NOT NULL, "isLike" boolean NOT NULL DEFAULT false, CONSTRAINT "PK_6ff1e68877e8b48e7531a313c72" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:39 [KMG] debug: creating a new table: car.comment
3572 07.06.2021 17:43:39 [KMG] debug: CREATE TABLE "car"."comment" ("id" BIGSERIAL NOT NULL, "createDate" date, "user_id" bigint, "car_id" bigint, CONSTRAINT "PK_7ba0190c3e9faa92d05cd5a1664" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:39 [KMG] debug: creating a new table: security.user
3572 07.06.2021 17:43:39 [KMG] debug: CREATE TABLE "security"."user" ("id" BIGSERIAL NOT NULL, "image" character varying(128), "name" character varying(128) NOT NULL, "surname" character varying(128) NOT NULL, "secondname" character varying(128), "email" character varying(128) NOT NULL, "phone" character varying(128), "password" character varying NOT NULL, CONSTRAINT "PK_8ef7be7d4560609cbc83aae4da3" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:39 [KMG] error: {
  "length": 102,
  "name": "error",
  "severity": "ERROR",
  "code": "3F000",
  "position": "14",
  "file": "namespace.c",
  "line": "3029",
  "routine": "get_namespace_oid"
}
3572 07.06.2021 17:43:39 [KMG] error: CREATE TABLE "security"."user" ("id" BIGSERIAL NOT NULL, "image" character varying(128), "name" character varying(128) NOT NULL, "surname" character varying(128) NOT NULL, "secondname" character varying(128), "email" character varying(128) NOT NULL, "phone" character varying(128), "password" character varying NOT NULL, CONSTRAINT "PK_8ef7be7d4560609cbc83aae4da3" PRIMARY KEY ("id"))
3572 07.06.2021 17:43:39 [KMG] error: {
  "upQueries": [
    {
      "query": "CREATE TABLE \"car\".\"grade\" (\"id\" BIGSERIAL NOT NULL, \"text\" character varying(128) NOT NULL, \"gradeType\" character varying NOT NULL, \"comment_id\" bigint, CONSTRAINT \"PK_daa037f2a43e6fd58fdee5be2a8\" PRIMARY KEY (\"id\"))"
    },
    {
      "query": "CREATE TABLE \"car\".\"like\" (\"id\" BIGSERIAL NOT NULL, \"isLike\" boolean NOT NULL DEFAULT false, CONSTRAINT \"PK_6ff1e68877e8b48e7531a313c72\" PRIMARY KEY (\"id\"))"
    },
    {
      "query": "CREATE TABLE \"car\".\"comment\" (\"id\" BIGSERIAL NOT NULL, \"createDate\" date, \"user_id\" bigint, \"car_id\" bigint, CONSTRAINT \"PK_7ba0190c3e9faa92d05cd5a1664\" PRIMARY KEY (\"id\"))"
    },
    {
      "query": "CREATE TABLE \"security\".\"user\" (\"id\" BIGSERIAL NOT NULL, \"image\" character varying(128), \"name\" character varying(128) NOT NULL, \"surname\" character varying(128) NOT NULL, \"secondname\" character varying(128), \"email\" character varying(128) NOT NULL, \"phone\" character varying(128), \"password\" character varying NOT NULL, CONSTRAINT \"PK_8ef7be7d4560609cbc83aae4da3\" PRIMARY KEY (\"id\"))"
    }
  ],
  "downQueries": [
    {
      "query": "DROP TABLE \"car\".\"grade\""
    },
    {
      "query": "DROP TABLE \"car\".\"like\""
    },
    {
      "query": "DROP TABLE \"car\".\"comment\""
    },
    {
      "query": "DROP TABLE \"security\".\"user\""
    }
  ]
}
3572 07.06.2021 17:43:39 [KMG] debug: ROLLBACK
11728 07.06.2021 17:43:59 [KMG] debug: START TRANSACTION
11728 07.06.2021 17:43:59 [KMG] debug: SELECT * FROM current_schema()
11728 07.06.2021 17:43:59 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
11728 07.06.2021 17:43:59 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11728 07.06.2021 17:43:59 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
11728 07.06.2021 17:43:59 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11728 07.06.2021 17:43:59 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
11728 07.06.2021 17:43:59 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
11728 07.06.2021 17:43:59 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
11728 07.06.2021 17:43:59 [KMG] debug: creating a new table: car.grade
11728 07.06.2021 17:43:59 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
11728 07.06.2021 17:43:59 [KMG] debug: creating a new table: car.like
11728 07.06.2021 17:43:59 [KMG] debug: CREATE TABLE "car"."like" ("id" BIGSERIAL NOT NULL, "isLike" boolean NOT NULL DEFAULT false, CONSTRAINT "PK_6ff1e68877e8b48e7531a313c72" PRIMARY KEY ("id"))
11728 07.06.2021 17:43:59 [KMG] debug: creating a new table: car.comment
11728 07.06.2021 17:43:59 [KMG] debug: CREATE TABLE "car"."comment" ("id" BIGSERIAL NOT NULL, "createDate" date, "user_id" bigint, "car_id" bigint, CONSTRAINT "PK_7ba0190c3e9faa92d05cd5a1664" PRIMARY KEY ("id"))
11728 07.06.2021 17:43:59 [KMG] debug: creating a new table: security.user
11728 07.06.2021 17:43:59 [KMG] debug: CREATE TABLE "security"."user" ("id" BIGSERIAL NOT NULL, "image" character varying(128), "name" character varying(128) NOT NULL, "surname" character varying(128) NOT NULL, "secondname" character varying(128), "email" character varying(128) NOT NULL, "phone" character varying(128), "password" character varying NOT NULL, CONSTRAINT "PK_8ef7be7d4560609cbc83aae4da3" PRIMARY KEY ("id"))
11728 07.06.2021 17:43:59 [KMG] debug: creating a new table: order.place
11728 07.06.2021 17:43:59 [KMG] debug: CREATE TABLE "order"."place" ("id" BIGSERIAL NOT NULL, "name" character varying(128) NOT NULL, CONSTRAINT "PK_c255227021283de79b14d6d38fe" PRIMARY KEY ("id"))
11728 07.06.2021 17:43:59 [KMG] debug: creating a new table: order.order
11728 07.06.2021 17:43:59 [KMG] debug: CREATE TABLE "order"."order" ("id" BIGSERIAL NOT NULL, "status" character varying NOT NULL, "statusText" character varying NOT NULL, "statusClass" character varying NOT NULL, "orderSum" integer NOT NULL, "dateFrom" character varying NOT NULL, "dateTo" character varying NOT NULL, "time" character varying NOT NULL, "car_id" bigint, "user_id" bigint, "place_id" bigint, CONSTRAINT "PK_58998c5eaeaacdd004dec8b5d86" PRIMARY KEY ("id"))
11728 07.06.2021 17:43:59 [KMG] debug: creating a new table: car.car
11728 07.06.2021 17:43:59 [KMG] debug: CREATE TABLE "car"."car" ("id" BIGSERIAL NOT NULL, "img" character NOT NULL, "name" character NOT NULL, "description" character NOT NULL, "price" integer NOT NULL, "bodyType" character NOT NULL, "fuelType" character NOT NULL, "fuelCity" integer NOT NULL, "fuelTrack" integer NOT NULL, "enginePower" integer NOT NULL, "engineVolume" integer, "maxSpeed" integer, "accelerationTime" integer, "kpp" character NOT NULL, "gears" integer NOT NULL, "wheelDrive" character NOT NULL, "doors" integer NOT NULL, "sits" integer NOT NULL, "airbags" integer, "AC" character NOT NULL, "steering" character NOT NULL, "trunkVolume" integer NOT NULL, "createYear" integer, "rating" integer, CONSTRAINT "PK_1755d5edaf7738f5780f57a445f" PRIMARY KEY ("id"))
11728 07.06.2021 17:43:59 [KMG] debug: creating a foreign keys: FK_a6131c94a1a1224b4b8689e5d26 on table "car.grade"
11728 07.06.2021 17:43:59 [KMG] debug: ALTER TABLE "car"."grade" ADD CONSTRAINT "FK_a6131c94a1a1224b4b8689e5d26" FOREIGN KEY ("comment_id") REFERENCES "car"."comment"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
11728 07.06.2021 17:43:59 [KMG] debug: creating a foreign keys: FK_0f90990240f3c5da5bd42c1b3d5, FK_1c119654000d0a5bfc3e7e9b5ac on table "car.comment"
11728 07.06.2021 17:43:59 [KMG] debug: ALTER TABLE "car"."comment" ADD CONSTRAINT "FK_0f90990240f3c5da5bd42c1b3d5" FOREIGN KEY ("user_id") REFERENCES "security"."user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
11728 07.06.2021 17:43:59 [KMG] debug: ALTER TABLE "car"."comment" ADD CONSTRAINT "FK_1c119654000d0a5bfc3e7e9b5ac" FOREIGN KEY ("car_id") REFERENCES "car"."car"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
11728 07.06.2021 17:43:59 [KMG] debug: creating a foreign keys: FK_0e60dfa32e5e3e0f9c11fdf921b, FK_8f7b6c575c941172e8ef9704c4d, FK_e754867dcfe8eea122ad147cac4 on table "order.order"
11728 07.06.2021 17:43:59 [KMG] debug: ALTER TABLE "order"."order" ADD CONSTRAINT "FK_0e60dfa32e5e3e0f9c11fdf921b" FOREIGN KEY ("car_id") REFERENCES "car"."car"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
11728 07.06.2021 17:43:59 [KMG] debug: ALTER TABLE "order"."order" ADD CONSTRAINT "FK_8f7b6c575c941172e8ef9704c4d" FOREIGN KEY ("user_id") REFERENCES "security"."user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
11728 07.06.2021 17:43:59 [KMG] debug: ALTER TABLE "order"."order" ADD CONSTRAINT "FK_e754867dcfe8eea122ad147cac4" FOREIGN KEY ("place_id") REFERENCES "order"."place"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
11728 07.06.2021 17:43:59 [KMG] debug: COMMIT
10964 08.06.2021 09:25:11 [KMG] debug: START TRANSACTION
10964 08.06.2021 09:25:11 [KMG] debug: SELECT * FROM current_schema()
10964 08.06.2021 09:25:11 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
10964 08.06.2021 09:25:11 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'car' AND "table_name" = 'user_likes') OR ("table_schema" = 'car' AND "table_name" = 'comment_likes')
10964 08.06.2021 09:25:11 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'car' AND "table_name" = 'user_likes') OR ("table_schema" = 'car' AND "table_name" = 'comment_likes')
10964 08.06.2021 09:25:11 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'user_likes') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment_likes'))
10964 08.06.2021 09:25:11 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'user_likes') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment_likes'))
10964 08.06.2021 09:25:11 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'user_likes') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment_likes')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
10964 08.06.2021 09:25:11 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
10964 08.06.2021 09:25:11 [KMG] debug: creating a new table: car.user_likes
10964 08.06.2021 09:25:11 [KMG] debug: CREATE TABLE "car"."user_likes" ("like_id" bigint NOT NULL, "user_id" bigint NOT NULL, CONSTRAINT "PK_18d163e805cf4a667956598e715" PRIMARY KEY ("like_id", "user_id"))
10964 08.06.2021 09:25:11 [KMG] debug: CREATE INDEX "IDX_d958c454213994500fe08f504d" ON "car"."user_likes" ("like_id") 
10964 08.06.2021 09:25:11 [KMG] debug: CREATE INDEX "IDX_207fb74ff647e2fe9295f6ad3b" ON "car"."user_likes" ("user_id") 
10964 08.06.2021 09:25:11 [KMG] debug: creating a new table: car.comment_likes
10964 08.06.2021 09:25:11 [KMG] debug: CREATE TABLE "car"."comment_likes" ("like_id" bigint NOT NULL, "comment_id" bigint NOT NULL, CONSTRAINT "PK_5608789d61216f0c2f7a76e40f8" PRIMARY KEY ("like_id", "comment_id"))
10964 08.06.2021 09:25:11 [KMG] debug: CREATE INDEX "IDX_b58c1e1cd8c93b9d479fa89da3" ON "car"."comment_likes" ("like_id") 
10964 08.06.2021 09:25:11 [KMG] debug: CREATE INDEX "IDX_ad9889ec41c1e0dc1b78ec3ddc" ON "car"."comment_likes" ("comment_id") 
10964 08.06.2021 09:25:11 [KMG] debug: creating a foreign keys: FK_d958c454213994500fe08f504da, FK_207fb74ff647e2fe9295f6ad3bd on table "car.user_likes"
10964 08.06.2021 09:25:11 [KMG] debug: ALTER TABLE "car"."user_likes" ADD CONSTRAINT "FK_d958c454213994500fe08f504da" FOREIGN KEY ("like_id") REFERENCES "car"."like"("id") ON DELETE CASCADE ON UPDATE NO ACTION
10964 08.06.2021 09:25:11 [KMG] debug: ALTER TABLE "car"."user_likes" ADD CONSTRAINT "FK_207fb74ff647e2fe9295f6ad3bd" FOREIGN KEY ("user_id") REFERENCES "security"."user"("id") ON DELETE CASCADE ON UPDATE NO ACTION
10964 08.06.2021 09:25:11 [KMG] debug: creating a foreign keys: FK_b58c1e1cd8c93b9d479fa89da31, FK_ad9889ec41c1e0dc1b78ec3ddc3 on table "car.comment_likes"
10964 08.06.2021 09:25:11 [KMG] debug: ALTER TABLE "car"."comment_likes" ADD CONSTRAINT "FK_b58c1e1cd8c93b9d479fa89da31" FOREIGN KEY ("like_id") REFERENCES "car"."like"("id") ON DELETE CASCADE ON UPDATE NO ACTION
10964 08.06.2021 09:25:11 [KMG] debug: ALTER TABLE "car"."comment_likes" ADD CONSTRAINT "FK_ad9889ec41c1e0dc1b78ec3ddc3" FOREIGN KEY ("comment_id") REFERENCES "car"."comment"("id") ON DELETE CASCADE ON UPDATE NO ACTION
10964 08.06.2021 09:25:11 [KMG] debug: COMMIT
15208 08.06.2021 09:38:11 [KMG] debug: START TRANSACTION
15208 08.06.2021 09:38:11 [KMG] debug: SELECT * FROM current_schema()
15208 08.06.2021 09:38:11 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
15208 08.06.2021 09:38:11 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'car' AND "table_name" = 'user_likes')
15208 08.06.2021 09:38:11 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'car' AND "table_name" = 'user_likes')
15208 08.06.2021 09:38:11 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'user_likes'))
15208 08.06.2021 09:38:11 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'user_likes'))
15208 08.06.2021 09:38:11 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'user_likes')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
15208 08.06.2021 09:38:11 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
15208 08.06.2021 09:38:11 [KMG] debug: new columns added: comment_id
15208 08.06.2021 09:38:11 [KMG] debug: ALTER TABLE "car"."like" ADD "comment_id" bigint
15208 08.06.2021 09:38:11 [KMG] debug: creating a foreign keys: FK_bd9e2bfde7830dd376310d7a38b on table "car.like"
15208 08.06.2021 09:38:11 [KMG] debug: ALTER TABLE "car"."like" ADD CONSTRAINT "FK_bd9e2bfde7830dd376310d7a38b" FOREIGN KEY ("comment_id") REFERENCES "car"."comment"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
15208 08.06.2021 09:38:11 [KMG] debug: COMMIT
16000 08.06.2021 09:38:51 [KMG] debug: START TRANSACTION
16000 08.06.2021 09:38:51 [KMG] debug: SELECT * FROM current_schema()
16000 08.06.2021 09:38:51 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
16000 08.06.2021 09:38:51 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'car' AND "table_name" = 'user_likes')
16000 08.06.2021 09:38:51 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'car' AND "table_name" = 'user_likes')
16000 08.06.2021 09:38:51 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'user_likes'))
16000 08.06.2021 09:38:51 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'user_likes'))
16000 08.06.2021 09:38:51 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'user_likes')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
16000 08.06.2021 09:38:51 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
16000 08.06.2021 09:38:51 [KMG] debug: COMMIT
15288 08.06.2021 09:40:36 [KMG] debug: START TRANSACTION
15288 08.06.2021 09:40:36 [KMG] debug: SELECT * FROM current_schema()
15288 08.06.2021 09:40:36 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
15288 08.06.2021 09:40:36 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'car' AND "table_name" = 'user_likes')
15288 08.06.2021 09:40:36 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'car' AND "table_name" = 'user_likes')
15288 08.06.2021 09:40:36 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'user_likes'))
15288 08.06.2021 09:40:36 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'user_likes'))
15288 08.06.2021 09:40:36 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'user_likes')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
15288 08.06.2021 09:40:36 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
15288 08.06.2021 09:40:36 [KMG] debug: COMMIT
8388 08.06.2021 09:47:33 [KMG] debug: START TRANSACTION
8388 08.06.2021 09:47:33 [KMG] debug: SELECT * FROM current_schema()
8388 08.06.2021 09:47:33 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
8388 08.06.2021 09:47:33 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'car' AND "table_name" = 'user_likes')
8388 08.06.2021 09:47:33 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'car' AND "table_name" = 'user_likes')
8388 08.06.2021 09:47:33 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'user_likes'))
8388 08.06.2021 09:47:33 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'user_likes'))
8388 08.06.2021 09:47:33 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'user_likes')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
8388 08.06.2021 09:47:33 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
8388 08.06.2021 09:47:33 [KMG] debug: creating a new table: car.grade
8388 08.06.2021 09:47:34 [KMG] debug: CREATE TABLE "car"."grade" ("id" BIGSERIAL NOT NULL, "text" character varying(128) NOT NULL, "gradeType" character varying NOT NULL, "comment_id" bigint, CONSTRAINT "PK_daa037f2a43e6fd58fdee5be2a8" PRIMARY KEY ("id"))
8388 08.06.2021 09:47:34 [KMG] debug: creating a new table: car.like
8388 08.06.2021 09:47:34 [KMG] debug: CREATE TABLE "car"."like" ("id" BIGSERIAL NOT NULL, "isLike" boolean NOT NULL DEFAULT false, "comment_id" bigint, CONSTRAINT "PK_6ff1e68877e8b48e7531a313c72" PRIMARY KEY ("id"))
8388 08.06.2021 09:47:34 [KMG] debug: creating a new table: car.comment
8388 08.06.2021 09:47:34 [KMG] debug: CREATE TABLE "car"."comment" ("id" BIGSERIAL NOT NULL, "createDate" date, "user_id" bigint, "car_id" bigint, CONSTRAINT "PK_7ba0190c3e9faa92d05cd5a1664" PRIMARY KEY ("id"))
8388 08.06.2021 09:47:34 [KMG] debug: creating a new table: security.user
8388 08.06.2021 09:47:34 [KMG] debug: CREATE TABLE "security"."user" ("id" BIGSERIAL NOT NULL, "image" character varying(128), "name" character varying(128) NOT NULL, "surname" character varying(128) NOT NULL, "secondname" character varying(128), "email" character varying(128) NOT NULL, "phone" character varying(128), "password" character varying NOT NULL, CONSTRAINT "PK_8ef7be7d4560609cbc83aae4da3" PRIMARY KEY ("id"))
8388 08.06.2021 09:47:34 [KMG] debug: creating a new table: order.place
8388 08.06.2021 09:47:34 [KMG] debug: CREATE TABLE "order"."place" ("id" BIGSERIAL NOT NULL, "name" character varying(128) NOT NULL, CONSTRAINT "PK_c255227021283de79b14d6d38fe" PRIMARY KEY ("id"))
8388 08.06.2021 09:47:34 [KMG] debug: creating a new table: order.order
8388 08.06.2021 09:47:34 [KMG] debug: CREATE TABLE "order"."order" ("id" BIGSERIAL NOT NULL, "status" character varying NOT NULL, "statusText" character varying NOT NULL, "statusClass" character varying NOT NULL, "orderSum" integer NOT NULL, "dateFrom" character varying NOT NULL, "dateTo" character varying NOT NULL, "time" character varying NOT NULL, "car_id" bigint, "user_id" bigint, "place_id" bigint, CONSTRAINT "PK_58998c5eaeaacdd004dec8b5d86" PRIMARY KEY ("id"))
8388 08.06.2021 09:47:34 [KMG] debug: creating a new table: car.car
8388 08.06.2021 09:47:34 [KMG] debug: CREATE TABLE "car"."car" ("id" BIGSERIAL NOT NULL, "img" character NOT NULL, "name" character NOT NULL, "description" character NOT NULL, "price" integer NOT NULL, "bodyType" character NOT NULL, "fuelType" character NOT NULL, "fuelCity" integer NOT NULL, "fuelTrack" integer NOT NULL, "enginePower" integer NOT NULL, "engineVolume" integer, "maxSpeed" integer, "accelerationTime" integer, "kpp" character NOT NULL, "gears" integer NOT NULL, "wheelDrive" character NOT NULL, "doors" integer NOT NULL, "sits" integer NOT NULL, "airbags" integer, "AC" character NOT NULL, "steering" character NOT NULL, "trunkVolume" integer NOT NULL, "createYear" integer, "rating" integer, CONSTRAINT "PK_1755d5edaf7738f5780f57a445f" PRIMARY KEY ("id"))
8388 08.06.2021 09:47:34 [KMG] debug: creating a new table: car.user_likes
8388 08.06.2021 09:47:34 [KMG] debug: CREATE TABLE "car"."user_likes" ("like_id" bigint NOT NULL, "user_id" bigint NOT NULL, CONSTRAINT "PK_18d163e805cf4a667956598e715" PRIMARY KEY ("like_id", "user_id"))
8388 08.06.2021 09:47:34 [KMG] debug: CREATE INDEX "IDX_d958c454213994500fe08f504d" ON "car"."user_likes" ("like_id") 
8388 08.06.2021 09:47:34 [KMG] debug: CREATE INDEX "IDX_207fb74ff647e2fe9295f6ad3b" ON "car"."user_likes" ("user_id") 
8388 08.06.2021 09:47:34 [KMG] debug: creating a foreign keys: FK_a6131c94a1a1224b4b8689e5d26 on table "car.grade"
8388 08.06.2021 09:47:34 [KMG] debug: ALTER TABLE "car"."grade" ADD CONSTRAINT "FK_a6131c94a1a1224b4b8689e5d26" FOREIGN KEY ("comment_id") REFERENCES "car"."comment"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
8388 08.06.2021 09:47:34 [KMG] debug: creating a foreign keys: FK_bd9e2bfde7830dd376310d7a38b on table "car.like"
8388 08.06.2021 09:47:34 [KMG] debug: ALTER TABLE "car"."like" ADD CONSTRAINT "FK_bd9e2bfde7830dd376310d7a38b" FOREIGN KEY ("comment_id") REFERENCES "car"."comment"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
8388 08.06.2021 09:47:34 [KMG] debug: creating a foreign keys: FK_0f90990240f3c5da5bd42c1b3d5, FK_1c119654000d0a5bfc3e7e9b5ac on table "car.comment"
8388 08.06.2021 09:47:34 [KMG] debug: ALTER TABLE "car"."comment" ADD CONSTRAINT "FK_0f90990240f3c5da5bd42c1b3d5" FOREIGN KEY ("user_id") REFERENCES "security"."user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
8388 08.06.2021 09:47:34 [KMG] debug: ALTER TABLE "car"."comment" ADD CONSTRAINT "FK_1c119654000d0a5bfc3e7e9b5ac" FOREIGN KEY ("car_id") REFERENCES "car"."car"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
8388 08.06.2021 09:47:34 [KMG] debug: creating a foreign keys: FK_0e60dfa32e5e3e0f9c11fdf921b, FK_8f7b6c575c941172e8ef9704c4d, FK_e754867dcfe8eea122ad147cac4 on table "order.order"
8388 08.06.2021 09:47:34 [KMG] debug: ALTER TABLE "order"."order" ADD CONSTRAINT "FK_0e60dfa32e5e3e0f9c11fdf921b" FOREIGN KEY ("car_id") REFERENCES "car"."car"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
8388 08.06.2021 09:47:34 [KMG] debug: ALTER TABLE "order"."order" ADD CONSTRAINT "FK_8f7b6c575c941172e8ef9704c4d" FOREIGN KEY ("user_id") REFERENCES "security"."user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
8388 08.06.2021 09:47:34 [KMG] debug: ALTER TABLE "order"."order" ADD CONSTRAINT "FK_e754867dcfe8eea122ad147cac4" FOREIGN KEY ("place_id") REFERENCES "order"."place"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
8388 08.06.2021 09:47:34 [KMG] debug: creating a foreign keys: FK_d958c454213994500fe08f504da, FK_207fb74ff647e2fe9295f6ad3bd on table "car.user_likes"
8388 08.06.2021 09:47:34 [KMG] debug: ALTER TABLE "car"."user_likes" ADD CONSTRAINT "FK_d958c454213994500fe08f504da" FOREIGN KEY ("like_id") REFERENCES "car"."like"("id") ON DELETE CASCADE ON UPDATE NO ACTION
8388 08.06.2021 09:47:34 [KMG] debug: ALTER TABLE "car"."user_likes" ADD CONSTRAINT "FK_207fb74ff647e2fe9295f6ad3bd" FOREIGN KEY ("user_id") REFERENCES "security"."user"("id") ON DELETE CASCADE ON UPDATE NO ACTION
8388 08.06.2021 09:47:34 [KMG] debug: COMMIT
15544 08.06.2021 09:52:45 [KMG] debug: START TRANSACTION
15544 08.06.2021 09:52:45 [KMG] debug: SELECT * FROM current_schema()
15544 08.06.2021 09:52:45 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
15544 08.06.2021 09:52:45 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
15544 08.06.2021 09:52:45 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
15544 08.06.2021 09:52:45 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
15544 08.06.2021 09:52:45 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
15544 08.06.2021 09:52:45 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
15544 08.06.2021 09:52:45 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
15544 08.06.2021 09:52:45 [KMG] debug: new columns added: user_id
15544 08.06.2021 09:52:45 [KMG] debug: ALTER TABLE "car"."like" ADD "user_id" bigint
15544 08.06.2021 09:52:45 [KMG] debug: creating a foreign keys: FK_a01f258fdbf64c9a8293f32b8b0 on table "car.like"
15544 08.06.2021 09:52:45 [KMG] debug: ALTER TABLE "car"."like" ADD CONSTRAINT "FK_a01f258fdbf64c9a8293f32b8b0" FOREIGN KEY ("user_id") REFERENCES "security"."user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
15544 08.06.2021 09:52:45 [KMG] debug: COMMIT
15844 08.06.2021 09:53:23 [KMG] debug: START TRANSACTION
15844 08.06.2021 09:53:23 [KMG] debug: SELECT * FROM current_schema()
15844 08.06.2021 09:53:23 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
15844 08.06.2021 09:53:23 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
15844 08.06.2021 09:53:23 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
15844 08.06.2021 09:53:23 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
15844 08.06.2021 09:53:23 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
15844 08.06.2021 09:53:23 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
15844 08.06.2021 09:53:23 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
15844 08.06.2021 09:53:23 [KMG] debug: COMMIT
13500 08.06.2021 09:54:27 [KMG] debug: START TRANSACTION
13500 08.06.2021 09:54:27 [KMG] debug: SELECT * FROM current_schema()
13500 08.06.2021 09:54:27 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
13500 08.06.2021 09:54:27 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13500 08.06.2021 09:54:27 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13500 08.06.2021 09:54:27 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13500 08.06.2021 09:54:27 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13500 08.06.2021 09:54:27 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
13500 08.06.2021 09:54:27 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
13500 08.06.2021 09:54:27 [KMG] debug: COMMIT
16296 08.06.2021 09:57:48 [KMG] debug: START TRANSACTION
16296 08.06.2021 09:57:48 [KMG] debug: SELECT * FROM current_schema()
16296 08.06.2021 09:57:48 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
16296 08.06.2021 09:57:48 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
16296 08.06.2021 09:57:48 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
16296 08.06.2021 09:57:48 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
16296 08.06.2021 09:57:48 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
16296 08.06.2021 09:57:48 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
16296 08.06.2021 09:57:48 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
16296 08.06.2021 09:57:48 [KMG] debug: new columns added: isAdmin
16296 08.06.2021 09:57:48 [KMG] debug: ALTER TABLE "security"."user" ADD "isAdmin" boolean NOT NULL DEFAULT false
16296 08.06.2021 09:57:48 [KMG] debug: COMMIT
12792 08.06.2021 10:03:23 [KMG] debug: START TRANSACTION
12792 08.06.2021 10:03:23 [KMG] debug: SELECT * FROM current_schema()
12792 08.06.2021 10:03:23 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
12792 08.06.2021 10:03:23 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
12792 08.06.2021 10:03:23 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
12792 08.06.2021 10:03:23 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
12792 08.06.2021 10:03:23 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
12792 08.06.2021 10:03:23 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
12792 08.06.2021 10:03:23 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
12792 08.06.2021 10:03:23 [KMG] debug: renaming column "name" in to "address"
12792 08.06.2021 10:03:23 [KMG] debug: ALTER TABLE "order"."place" RENAME COLUMN "name" TO "address"
12792 08.06.2021 10:03:23 [KMG] debug: COMMIT
13116 08.06.2021 10:09:40 [KMG] debug: START TRANSACTION
13116 08.06.2021 10:09:40 [KMG] debug: SELECT * FROM current_schema()
13116 08.06.2021 10:09:40 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
13116 08.06.2021 10:09:40 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13116 08.06.2021 10:09:40 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
13116 08.06.2021 10:09:40 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13116 08.06.2021 10:09:40 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
13116 08.06.2021 10:09:40 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
13116 08.06.2021 10:09:40 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
13116 08.06.2021 10:09:40 [KMG] debug: creating a new table: security.role
13116 08.06.2021 10:09:40 [KMG] debug: SELECT "n"."nspname", "t"."typname" FROM "pg_type" "t" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'security' AND "t"."typname" = 'role_type_enum'
13116 08.06.2021 10:09:40 [KMG] debug: CREATE TYPE "security"."role_type_enum" AS ENUM('ADMIN', 'CLIENT', 'CONTRACTOR')
13116 08.06.2021 10:09:40 [KMG] debug: CREATE TABLE "security"."role" ("id" BIGSERIAL NOT NULL, "type" "security"."role_type_enum", "description" text, CONSTRAINT "PK_3dce45165c7e3523317ef6b4565" PRIMARY KEY ("id"))
13116 08.06.2021 10:09:40 [KMG] debug: CREATE INDEX "roleTypeIndex" ON "security"."role" ("type") 
13116 08.06.2021 10:09:40 [KMG] debug: new columns added: role_id
13116 08.06.2021 10:09:40 [KMG] debug: ALTER TABLE "security"."user" ADD "role_id" bigint
13116 08.06.2021 10:09:40 [KMG] debug: adding new indices "userEmailIndex" in table "security.user"
13116 08.06.2021 10:09:40 [KMG] debug: CREATE UNIQUE INDEX "userEmailIndex" ON "security"."user" ("email") 
13116 08.06.2021 10:09:40 [KMG] debug: creating a foreign keys: FK_70530a5087ce01e1ad1ecb21f03 on table "security.user"
13116 08.06.2021 10:09:40 [KMG] debug: ALTER TABLE "security"."user" ADD CONSTRAINT "FK_70530a5087ce01e1ad1ecb21f03" FOREIGN KEY ("role_id") REFERENCES "security"."role"("id") ON DELETE CASCADE ON UPDATE NO ACTION
13116 08.06.2021 10:09:40 [KMG] debug: COMMIT
16132 08.06.2021 10:11:41 [KMG] debug: START TRANSACTION
16132 08.06.2021 10:11:41 [KMG] debug: SELECT * FROM current_schema()
16132 08.06.2021 10:11:41 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
16132 08.06.2021 10:11:41 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
16132 08.06.2021 10:11:41 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
16132 08.06.2021 10:11:41 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
16132 08.06.2021 10:11:41 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
16132 08.06.2021 10:11:41 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
16132 08.06.2021 10:11:41 [KMG] debug: SELECT * FROM current_schema()
16132 08.06.2021 10:11:41 [KMG] debug: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'security' AND "table_name" = 'role' AND "column_name"='type'
16132 08.06.2021 10:11:41 [KMG] debug: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'security' AND "t"."typname" = 'role_type_enum'
16132 08.06.2021 10:11:41 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
16132 08.06.2021 10:11:41 [KMG] debug: columns dropped in security.user: isAdmin
16132 08.06.2021 10:11:41 [KMG] debug: ALTER TABLE "security"."user" DROP COLUMN "isAdmin"
16132 08.06.2021 10:11:42 [KMG] debug: COMMIT
5372 08.06.2021 10:24:04 [KMG] debug: START TRANSACTION
5372 08.06.2021 10:24:04 [KMG] debug: SELECT * FROM current_schema()
5372 08.06.2021 10:24:04 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
5372 08.06.2021 10:24:04 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5372 08.06.2021 10:24:04 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
5372 08.06.2021 10:24:04 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5372 08.06.2021 10:24:04 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
5372 08.06.2021 10:24:04 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
5372 08.06.2021 10:24:04 [KMG] debug: SELECT * FROM current_schema()
5372 08.06.2021 10:24:04 [KMG] debug: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'security' AND "table_name" = 'role' AND "column_name"='type'
5372 08.06.2021 10:24:04 [KMG] debug: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'security' AND "t"."typname" = 'role_type_enum'
5372 08.06.2021 10:24:04 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
5372 08.06.2021 10:24:04 [KMG] debug: COMMIT
14944 08.06.2021 10:26:47 [KMG] debug: START TRANSACTION
14944 08.06.2021 10:26:47 [KMG] debug: SELECT * FROM current_schema()
14944 08.06.2021 10:26:47 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
14944 08.06.2021 10:26:47 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
14944 08.06.2021 10:26:47 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
14944 08.06.2021 10:26:47 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
14944 08.06.2021 10:26:47 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
14944 08.06.2021 10:26:47 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
14944 08.06.2021 10:26:47 [KMG] debug: SELECT * FROM current_schema()
14944 08.06.2021 10:26:47 [KMG] debug: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'security' AND "table_name" = 'role' AND "column_name"='type'
14944 08.06.2021 10:26:47 [KMG] debug: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'security' AND "t"."typname" = 'role_type_enum'
14944 08.06.2021 10:26:47 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
14944 08.06.2021 10:26:47 [KMG] debug: COMMIT
10188 08.06.2021 10:27:42 [KMG] debug: START TRANSACTION
10188 08.06.2021 10:27:42 [KMG] debug: SELECT * FROM current_schema()
10188 08.06.2021 10:27:42 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
10188 08.06.2021 10:27:42 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10188 08.06.2021 10:27:42 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
10188 08.06.2021 10:27:42 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10188 08.06.2021 10:27:42 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
10188 08.06.2021 10:27:42 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
10188 08.06.2021 10:27:43 [KMG] debug: SELECT * FROM current_schema()
10188 08.06.2021 10:27:43 [KMG] debug: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'security' AND "table_name" = 'role' AND "column_name"='type'
10188 08.06.2021 10:27:43 [KMG] debug: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'security' AND "t"."typname" = 'role_type_enum'
10188 08.06.2021 10:27:43 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
10188 08.06.2021 10:27:43 [KMG] debug: COMMIT
14700 08.06.2021 10:29:28 [KMG] debug: START TRANSACTION
14700 08.06.2021 10:29:28 [KMG] debug: SELECT * FROM current_schema()
14700 08.06.2021 10:29:28 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
14700 08.06.2021 10:29:29 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
14700 08.06.2021 10:29:29 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car')
14700 08.06.2021 10:29:29 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
14700 08.06.2021 10:29:29 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car'))
14700 08.06.2021 10:29:29 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
14700 08.06.2021 10:29:29 [KMG] debug: SELECT * FROM current_schema()
14700 08.06.2021 10:29:29 [KMG] debug: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'security' AND "table_name" = 'role' AND "column_name"='type'
14700 08.06.2021 10:29:29 [KMG] debug: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'security' AND "t"."typname" = 'role_type_enum'
14700 08.06.2021 10:29:29 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
14700 08.06.2021 10:29:29 [KMG] debug: COMMIT
1052 08.06.2021 11:31:25 [KMG] debug: START TRANSACTION
1052 08.06.2021 11:31:25 [KMG] debug: SELECT * FROM current_schema()
1052 08.06.2021 11:31:25 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
1052 08.06.2021 11:31:25 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'access_token') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'security' AND "table_name" = 'reset_token')
1052 08.06.2021 11:31:25 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'access_token') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'security' AND "table_name" = 'reset_token')
1052 08.06.2021 11:31:25 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'access_token') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'reset_token'))
1052 08.06.2021 11:31:25 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'access_token') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'reset_token'))
1052 08.06.2021 11:31:25 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'access_token') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'reset_token')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
1052 08.06.2021 11:31:25 [KMG] debug: SELECT * FROM current_schema()
1052 08.06.2021 11:31:25 [KMG] debug: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'security' AND "table_name" = 'role' AND "column_name"='type'
1052 08.06.2021 11:31:25 [KMG] debug: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'security' AND "t"."typname" = 'role_type_enum'
1052 08.06.2021 11:31:25 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
1052 08.06.2021 11:31:25 [KMG] debug: creating a new table: security.access_token
1052 08.06.2021 11:31:25 [KMG] debug: CREATE TABLE "security"."access_token" ("id" BIGSERIAL NOT NULL, "token" character varying NOT NULL, "expires" integer, "user_id" bigint, CONSTRAINT "PK_abab05dab4da2ca73b685ae6afc" PRIMARY KEY ("id"))
1052 08.06.2021 11:31:25 [KMG] debug: creating a new table: security.reset_token
1052 08.06.2021 11:31:25 [KMG] debug: CREATE TABLE "security"."reset_token" ("id" BIGSERIAL NOT NULL, "token" text NOT NULL, "expires" integer, "created" TIMESTAMP DEFAULT (now() at time zone 'Europe/Moscow'), "user_id" bigint, CONSTRAINT "PK_f17614deb9cd90d6d1fa1e8f3a4" PRIMARY KEY ("id"))
1052 08.06.2021 11:31:25 [KMG] debug: creating a foreign keys: FK_5f90f5429b95bb00d1154fe801f on table "security.access_token"
1052 08.06.2021 11:31:25 [KMG] debug: ALTER TABLE "security"."access_token" ADD CONSTRAINT "FK_5f90f5429b95bb00d1154fe801f" FOREIGN KEY ("user_id") REFERENCES "security"."user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
1052 08.06.2021 11:31:25 [KMG] debug: creating a foreign keys: FK_ce1b597186c6b9350093d3aca3d on table "security.reset_token"
1052 08.06.2021 11:31:25 [KMG] debug: ALTER TABLE "security"."reset_token" ADD CONSTRAINT "FK_ce1b597186c6b9350093d3aca3d" FOREIGN KEY ("user_id") REFERENCES "security"."user"("id") ON DELETE NO ACTION ON UPDATE NO ACTION
1052 08.06.2021 11:31:25 [KMG] debug: COMMIT
3488 08.06.2021 11:40:29 [KMG] debug: START TRANSACTION
3488 08.06.2021 11:40:29 [KMG] debug: SELECT * FROM current_schema()
3488 08.06.2021 11:40:29 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
3488 08.06.2021 11:40:29 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'access_token') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'security' AND "table_name" = 'reset_token')
3488 08.06.2021 11:40:29 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'access_token') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'security' AND "table_name" = 'reset_token')
3488 08.06.2021 11:40:29 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'access_token') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'reset_token'))
3488 08.06.2021 11:40:29 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'access_token') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'reset_token'))
3488 08.06.2021 11:40:29 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'access_token') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'reset_token')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
3488 08.06.2021 11:40:29 [KMG] debug: SELECT * FROM current_schema()
3488 08.06.2021 11:40:29 [KMG] debug: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'security' AND "table_name" = 'role' AND "column_name"='type'
3488 08.06.2021 11:40:29 [KMG] debug: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'security' AND "t"."typname" = 'role_type_enum'
3488 08.06.2021 11:40:29 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
3488 08.06.2021 11:40:29 [KMG] debug: columns changed in "security.reset_token". updating: created
3488 08.06.2021 11:40:29 [KMG] debug: ALTER TABLE "security"."reset_token" ALTER COLUMN "created" SET DEFAULT (now() at time zone 'Europe/Moscow')
3488 08.06.2021 11:40:29 [KMG] debug: COMMIT
6788 08.06.2021 11:40:46 [KMG] debug: START TRANSACTION
6788 08.06.2021 11:40:46 [KMG] debug: SELECT * FROM current_schema()
6788 08.06.2021 11:40:46 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
6788 08.06.2021 11:40:46 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'access_token') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'security' AND "table_name" = 'reset_token')
6788 08.06.2021 11:40:46 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'access_token') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'security' AND "table_name" = 'reset_token')
6788 08.06.2021 11:40:46 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'access_token') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'reset_token'))
6788 08.06.2021 11:40:46 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'access_token') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'reset_token'))
6788 08.06.2021 11:40:46 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'access_token') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'reset_token')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
6788 08.06.2021 11:40:46 [KMG] debug: SELECT * FROM current_schema()
6788 08.06.2021 11:40:46 [KMG] debug: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'security' AND "table_name" = 'role' AND "column_name"='type'
6788 08.06.2021 11:40:46 [KMG] debug: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'security' AND "t"."typname" = 'role_type_enum'
6788 08.06.2021 11:40:46 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
6788 08.06.2021 11:40:46 [KMG] debug: columns changed in "security.reset_token". updating: created
6788 08.06.2021 11:40:46 [KMG] debug: ALTER TABLE "security"."reset_token" ALTER COLUMN "created" SET DEFAULT (now() at time zone 'Europe/Moscow')
6788 08.06.2021 11:40:46 [KMG] debug: COMMIT
2080 08.06.2021 11:42:35 [KMG] debug: START TRANSACTION
2080 08.06.2021 11:42:35 [KMG] debug: SELECT * FROM current_schema()
2080 08.06.2021 11:42:35 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
2080 08.06.2021 11:42:35 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'access_token') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'security' AND "table_name" = 'reset_token')
2080 08.06.2021 11:42:35 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'access_token') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'security' AND "table_name" = 'reset_token')
2080 08.06.2021 11:42:35 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'access_token') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'reset_token'))
2080 08.06.2021 11:42:35 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'access_token') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'reset_token'))
2080 08.06.2021 11:42:35 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'access_token') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'reset_token')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
2080 08.06.2021 11:42:35 [KMG] debug: SELECT * FROM current_schema()
2080 08.06.2021 11:42:35 [KMG] debug: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'security' AND "table_name" = 'role' AND "column_name"='type'
2080 08.06.2021 11:42:35 [KMG] debug: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'security' AND "t"."typname" = 'role_type_enum'
2080 08.06.2021 11:42:35 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
2080 08.06.2021 11:42:35 [KMG] debug: columns changed in "security.reset_token". updating: created
2080 08.06.2021 11:42:35 [KMG] debug: ALTER TABLE "security"."reset_token" ALTER COLUMN "created" SET DEFAULT (now() at time zone 'Europe/Moscow')
2080 08.06.2021 11:42:35 [KMG] debug: COMMIT
3416 08.06.2021 11:43:25 [KMG] debug: START TRANSACTION
3416 08.06.2021 11:43:25 [KMG] debug: SELECT * FROM current_schema()
3416 08.06.2021 11:43:25 [KMG] debug: SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'
3416 08.06.2021 11:43:25 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'access_token') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'security' AND "table_name" = 'reset_token')
3416 08.06.2021 11:43:25 [KMG] debug: 
            SELECT columns.*,
              pg_catalog.col_description(('"' || table_catalog || '"."' || table_schema || '"."' || table_name || '"')::regclass::oid, ordinal_position) AS description,
              ('"' || "udt_schema" || '"."' || "udt_name" || '"')::"regtype" AS "regtype",
              pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type"
              FROM "information_schema"."columns"
              LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr"
              ON "col_attr"."attname" = "columns"."column_name"
              AND "col_attr"."attrelid" = (
                SELECT
                  "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls"
                  LEFT JOIN "pg_catalog"."pg_namespace" AS "ns"
                  ON "ns"."oid" = "cls"."relnamespace"
                WHERE "cls"."relname" = "columns"."table_name"
                AND "ns"."nspname" = "columns"."table_schema"
              )
            WHERE
            ("table_schema" = 'car' AND "table_name" = 'grade') OR ("table_schema" = 'car' AND "table_name" = 'like') OR ("table_schema" = 'car' AND "table_name" = 'comment') OR ("table_schema" = 'security' AND "table_name" = 'access_token') OR ("table_schema" = 'security' AND "table_name" = 'role') OR ("table_schema" = 'security' AND "table_name" = 'user') OR ("table_schema" = 'order' AND "table_name" = 'place') OR ("table_schema" = 'order' AND "table_name" = 'order') OR ("table_schema" = 'car' AND "table_name" = 'car') OR ("table_schema" = 'security' AND "table_name" = 'reset_token')
3416 08.06.2021 11:43:25 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'access_token') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'reset_token'))
3416 08.06.2021 11:43:25 [KMG] debug: SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (("ns"."nspname" = 'car' AND "t"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'access_token') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "t"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "t"."relname" = 'car') OR ("ns"."nspname" = 'security' AND "t"."relname" = 'reset_token'))
3416 08.06.2021 11:43:25 [KMG] debug: SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (("ns"."nspname" = 'car' AND "cl"."relname" = 'grade') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'like') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'comment') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'access_token') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'role') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'user') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'place') OR ("ns"."nspname" = 'order' AND "cl"."relname" = 'order') OR ("ns"."nspname" = 'car' AND "cl"."relname" = 'car') OR ("ns"."nspname" = 'security' AND "cl"."relname" = 'reset_token')) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid"  AND "cl"."relispartition" = 'f'INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"
3416 08.06.2021 11:43:25 [KMG] debug: SELECT * FROM current_schema()
3416 08.06.2021 11:43:25 [KMG] debug: SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = 'security' AND "table_name" = 'role' AND "column_name"='type'
3416 08.06.2021 11:43:25 [KMG] debug: SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = 'security' AND "t"."typname" = 'role_type_enum'
3416 08.06.2021 11:43:25 [KMG] debug: SELECT * FROM "information_schema"."tables" WHERE "table_schema" = current_schema() AND "table_name" = 'typeorm_metadata'
3416 08.06.2021 11:43:25 [KMG] debug: columns changed in "security.reset_token". updating: created
3416 08.06.2021 11:43:25 [KMG] debug: ALTER TABLE "security"."reset_token" ALTER COLUMN "created" SET DEFAULT (now() at time zone 'Europe/Moscow')
3416 08.06.2021 11:43:25 [KMG] debug: COMMIT
